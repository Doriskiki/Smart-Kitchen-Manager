<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.dao.UserShicaiDao">

	<!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="com.entity.UserShicaiEntity" id="userShicaiMap">
        <result property="userid" column="userid"/>
        <result property="shicaiName" column="shicai_name"/>
        <result property="quantity" column="quantity"/>
        <result property="unit" column="unit"/>
        <result property="purchaseDate" column="purchase_date"/>
        <result property="expiryDate" column="expiry_date"/>
        <result property="status" column="status"/>
        <result property="addtime" column="addtime"/>
    </resultMap>

	<!-- 查询用户有效食材（状态为'new'或'used'） -->
	<select id="selectValidIngredientsByUserId" resultMap="userShicaiMap">
		SELECT 
			id,
			userid,
			shicai_name,
			quantity,
			unit,
			purchase_date,
			expiry_date,
			status,
			addtime
		FROM user_shicai
		WHERE userid = #{userid}
		  AND status IN ('new', 'used')
		ORDER BY addtime DESC
	</select>

</mapper>
