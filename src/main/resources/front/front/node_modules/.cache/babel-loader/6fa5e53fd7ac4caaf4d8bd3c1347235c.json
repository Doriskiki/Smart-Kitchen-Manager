{"remainingRequest":"D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\src\\pages\\usershicai\\detail.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\src\\pages\\usershicai\\detail.vue","mtime":1766825751339},{"path":"D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\babel.config.js","mtime":1766811488312},{"path":"D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766827789760},{"path":"D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1766827793571},{"path":"D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766827789760},{"path":"D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1766827794095}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaWQ6ICcnLAogICAgICBkZXRhaWw6IHt9CiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuaWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5pZDsKICAgIHRoaXMuZ2V0SW5mbygpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0SW5mbygpIHsKICAgICAgdGhpcy4kaHR0cC5nZXQoYHVzZXJzaGljYWkvaW5mby8ke3RoaXMuaWR9YCkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuZGF0YSAmJiByZXMuZGF0YS5jb2RlID09PSAwKSB7CiAgICAgICAgICB0aGlzLmRldGFpbCA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBmb3JtYXREYXRlKGRhdGUpIHsKICAgICAgaWYgKCFkYXRlKSByZXR1cm4gJyc7CiAgICAgIGxldCBkID0gbmV3IERhdGUoZGF0ZSk7CiAgICAgIHJldHVybiBkLmdldEZ1bGxZZWFyKCkgKyAnLScgKyBTdHJpbmcoZC5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKSArICctJyArIFN0cmluZyhkLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTsKICAgIH0sCiAgICBmb3JtYXREYXRlVGltZShkYXRlKSB7CiAgICAgIGlmICghZGF0ZSkgcmV0dXJuICcnOwogICAgICBsZXQgZCA9IG5ldyBEYXRlKGRhdGUpOwogICAgICByZXR1cm4gZC5nZXRGdWxsWWVhcigpICsgJy0nICsgU3RyaW5nKGQuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJykgKyAnLScgKyBTdHJpbmcoZC5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJykgKyAnICcgKyBTdHJpbmcoZC5nZXRIb3VycygpKS5wYWRTdGFydCgyLCAnMCcpICsgJzonICsgU3RyaW5nKGQuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCAnMCcpICsgJzonICsgU3RyaW5nKGQuZ2V0U2Vjb25kcygpKS5wYWRTdGFydCgyLCAnMCcpOwogICAgfSwKICAgIGlzRXhwaXJpbmdTb29uKGV4cGlyeURhdGUpIHsKICAgICAgaWYgKCFleHBpcnlEYXRlKSByZXR1cm4gZmFsc2U7CiAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpOwogICAgICBsZXQgZXhwaXJ5ID0gbmV3IERhdGUoZXhwaXJ5RGF0ZSk7CiAgICAgIGxldCBkaWZmID0gZXhwaXJ5IC0gbm93OwogICAgICBsZXQgZGF5cyA9IGRpZmYgLyAoMTAwMCAqIDYwICogNjAgKiAyNCk7CiAgICAgIHJldHVybiBkYXlzID4gMCAmJiBkYXlzIDw9IDc7CiAgICB9LAogICAgZ2V0RXhwaXJ5U3R5bGUoZXhwaXJ5RGF0ZSkgewogICAgICBpZiAodGhpcy5pc0V4cGlyaW5nU29vbihleHBpcnlEYXRlKSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAnY29sb3InOiAnI2Y1NmM2YycsCiAgICAgICAgICAnZm9udFdlaWdodCc6ICdib2xkJwogICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuIHt9OwogICAgfSwKICAgIGdldFN0YXR1c1R5cGUoc3RhdHVzKSB7CiAgICAgIGNvbnN0IHR5cGVzID0gewogICAgICAgICduZXcnOiAnc3VjY2VzcycsCiAgICAgICAgJ3VzZWQnOiAnaW5mbycsCiAgICAgICAgJ2V4cGlyZWQnOiAnZGFuZ2VyJywKICAgICAgICAnZGlzY2FyZGVkJzogJ3dhcm5pbmcnCiAgICAgIH07CiAgICAgIHJldHVybiB0eXBlc1tzdGF0dXNdIHx8ICcnOwogICAgfSwKICAgIGdldFN0YXR1c1RleHQoc3RhdHVzKSB7CiAgICAgIGNvbnN0IHRleHRzID0gewogICAgICAgICduZXcnOiAn5paw6bKcJywKICAgICAgICAndXNlZCc6ICflt7Lkvb/nlKgnLAogICAgICAgICdleHBpcmVkJzogJ+W3sui/h+acnycsCiAgICAgICAgJ2Rpc2NhcmRlZCc6ICflt7LkuKLlvIMnCiAgICAgIH07CiAgICAgIHJldHVybiB0ZXh0c1tzdGF0dXNdIHx8IHN0YXR1czsKICAgIH0sCiAgICBtYXJrQXNVc2VkKCkgewogICAgICB0aGlzLiRjb25maXJtKCfnoa7lrprmoIforrDkuLrlt7Lkvb/nlKjlkJc/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuJGh0dHAucG9zdCgndXNlcnNoaWNhaS91cGRhdGUnLCB7CiAgICAgICAgICBpZDogdGhpcy5kZXRhaWwuaWQsCiAgICAgICAgICBzdGF0dXM6ICd1c2VkJwogICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuZGF0YSAmJiByZXMuZGF0YS5jb2RlID09PSAwKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5pON5L2c5oiQ5YqfJyk7CiAgICAgICAgICAgIHRoaXMuZ2V0SW5mbygpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBkZWwoKSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+ehruWumuWIoOmZpOWQlz8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy4kaHR0cC5wb3N0KCd1c2Vyc2hpY2FpL2RlbGV0ZScsIFt0aGlzLmlkXSkudGhlbihyZXMgPT4gewogICAgICAgICAgaWYgKHJlcy5kYXRhICYmIHJlcy5kYXRhLmNvZGUgPT09IDApIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfliKDpmaTmiJDlip8nKTsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9pbmRleC91c2Vyc2hpY2FpTGlzdCcpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBlZGl0KCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogJy9pbmRleC91c2Vyc2hpY2FpQWRkJywKICAgICAgICBxdWVyeTogewogICAgICAgICAgaWQ6IHRoaXMuaWQKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGJhY2soKSB7CiAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["data","id","detail","created","$route","query","getInfo","methods","$http","get","then","res","code","formatDate","date","d","Date","getFullYear","String","getMonth","padStart","getDate","formatDateTime","getHours","getMinutes","getSeconds","isExpiringSoon","expiryDate","now","expiry","diff","days","getExpiryStyle","getStatusType","status","types","getStatusText","texts","markAsUsed","$confirm","confirmButtonText","cancelButtonText","type","post","$message","success","del","$router","push","edit","path","back","go"],"sources":["src/pages/usershicai/detail.vue"],"sourcesContent":["<template>\r\n<div>\r\n\t<div :style='{\"padding\":\"12px\",\"margin\":\"10px auto\",\"borderColor\":\"#dbd9f4\",\"borderRadius\":\"8px\",\"background\":\"#fff\",\"borderWidth\":\"0 0 2px\",\"width\":\"1200px\",\"borderStyle\":\"solid\"}' class=\"breadcrumb-preview\">\r\n\t\t<el-breadcrumb :separator=\"'Ξ'\" :style='{\"width\":\"100%\",\"margin\":\"0 auto\",\"fontSize\":\"14px\",\"lineHeight\":\"1\",\"display\":\"flex\"}'>\r\n\t\t\t<el-breadcrumb-item>首页</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>我的食材库</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>食材详情</el-breadcrumb-item>\r\n\t\t</el-breadcrumb>\r\n\t</div>\r\n\t\r\n\t<div class=\"detail-preview\" :style='{\"width\":\"1200px\",\"margin\":\"10px auto\",\"position\":\"relative\",\"background\":\"none\"}'>\r\n\t\t<el-card :style='{\"border\":\"2px solid #dbd9f4\",\"borderRadius\":\"8px\",\"background\":\"#fff\"}'>\r\n\t\t\t<div slot=\"header\" class=\"clearfix\">\r\n\t\t\t\t<span :style='{\"fontSize\":\"20px\",\"fontWeight\":\"bold\"}'>{{detail.shicaiName}}</span>\r\n\t\t\t\t<el-tag :type=\"getStatusType(detail.status)\" :style='{\"marginLeft\":\"20px\"}'>{{getStatusText(detail.status)}}</el-tag>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<el-descriptions :column=\"2\" border>\r\n\t\t\t\t<el-descriptions-item label=\"食材名称\">{{detail.shicaiName}}</el-descriptions-item>\r\n\t\t\t\t<el-descriptions-item label=\"数量\">{{detail.quantity}} {{detail.unit}}</el-descriptions-item>\r\n\t\t\t\t<el-descriptions-item label=\"购买日期\">{{formatDate(detail.purchaseDate)}}</el-descriptions-item>\r\n\t\t\t\t<el-descriptions-item label=\"过期日期\">\r\n\t\t\t\t\t<span :style=\"getExpiryStyle(detail.expiryDate)\">\r\n\t\t\t\t\t\t{{formatDate(detail.expiryDate)}}\r\n\t\t\t\t\t\t<span v-if=\"isExpiringSoon(detail.expiryDate)\"> ⚠️ 即将过期</span>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</el-descriptions-item>\r\n\t\t\t\t<el-descriptions-item label=\"状态\">\r\n\t\t\t\t\t<el-tag :type=\"getStatusType(detail.status)\">{{getStatusText(detail.status)}}</el-tag>\r\n\t\t\t\t</el-descriptions-item>\r\n\t\t\t\t<el-descriptions-item label=\"添加时间\">{{formatDateTime(detail.addtime)}}</el-descriptions-item>\r\n\t\t\t</el-descriptions>\r\n\t\t\t\r\n\t\t\t<div :style='{\"marginTop\":\"30px\",\"textAlign\":\"center\"}'>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"edit()\" :style='{\"margin\":\"0 10px\"}'>编辑</el-button>\r\n\t\t\t\t<el-button type=\"warning\" @click=\"markAsUsed()\" v-if=\"detail.status=='new'\" :style='{\"margin\":\"0 10px\"}'>标记已使用</el-button>\r\n\t\t\t\t<el-button type=\"danger\" @click=\"del()\" :style='{\"margin\":\"0 10px\"}'>删除</el-button>\r\n\t\t\t\t<el-button @click=\"back()\" :style='{\"margin\":\"0 10px\"}'>返回</el-button>\r\n\t\t\t</div>\r\n\t\t</el-card>\r\n\t</div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tid: '',\r\n\t\t\tdetail: {}\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\tthis.id = this.$route.query.id;\r\n\t\tthis.getInfo();\r\n\t},\r\n\tmethods: {\r\n\t\tgetInfo() {\r\n\t\t\tthis.$http.get(`usershicai/info/${this.id}`).then(res => {\r\n\t\t\t\tif (res.data && res.data.code === 0) {\r\n\t\t\t\t\tthis.detail = res.data.data;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tformatDate(date) {\r\n\t\t\tif (!date) return '';\r\n\t\t\tlet d = new Date(date);\r\n\t\t\treturn d.getFullYear() + '-' + String(d.getMonth() + 1).padStart(2, '0') + '-' + String(d.getDate()).padStart(2, '0');\r\n\t\t},\r\n\t\tformatDateTime(date) {\r\n\t\t\tif (!date) return '';\r\n\t\t\tlet d = new Date(date);\r\n\t\t\treturn d.getFullYear() + '-' + String(d.getMonth() + 1).padStart(2, '0') + '-' + String(d.getDate()).padStart(2, '0') + ' ' +\r\n\t\t\t\t   String(d.getHours()).padStart(2, '0') + ':' + String(d.getMinutes()).padStart(2, '0') + ':' + String(d.getSeconds()).padStart(2, '0');\r\n\t\t},\r\n\t\tisExpiringSoon(expiryDate) {\r\n\t\t\tif (!expiryDate) return false;\r\n\t\t\tlet now = new Date();\r\n\t\t\tlet expiry = new Date(expiryDate);\r\n\t\t\tlet diff = expiry - now;\r\n\t\t\tlet days = diff / (1000 * 60 * 60 * 24);\r\n\t\t\treturn days > 0 && days <= 7;\r\n\t\t},\r\n\t\tgetExpiryStyle(expiryDate) {\r\n\t\t\tif (this.isExpiringSoon(expiryDate)) {\r\n\t\t\t\treturn {'color': '#f56c6c', 'fontWeight': 'bold'};\r\n\t\t\t}\r\n\t\t\treturn {};\r\n\t\t},\r\n\t\tgetStatusType(status) {\r\n\t\t\tconst types = {'new': 'success', 'used': 'info', 'expired': 'danger', 'discarded': 'warning'};\r\n\t\t\treturn types[status] || '';\r\n\t\t},\r\n\t\tgetStatusText(status) {\r\n\t\t\tconst texts = {'new': '新鲜', 'used': '已使用', 'expired': '已过期', 'discarded': '已丢弃'};\r\n\t\t\treturn texts[status] || status;\r\n\t\t},\r\n\t\tmarkAsUsed() {\r\n\t\t\tthis.$confirm('确定标记为已使用吗?', '提示', {confirmButtonText: '确定', cancelButtonText: '取消', type: 'warning'}).then(() => {\r\n\t\t\t\tthis.$http.post('usershicai/update', {id: this.detail.id, status: 'used'}).then(res => {\r\n\t\t\t\t\tif (res.data && res.data.code === 0) {\r\n\t\t\t\t\t\tthis.$message.success('操作成功');\r\n\t\t\t\t\t\tthis.getInfo();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\tdel() {\r\n\t\t\tthis.$confirm('确定删除吗?', '提示', {confirmButtonText: '确定', cancelButtonText: '取消', type: 'warning'}).then(() => {\r\n\t\t\t\tthis.$http.post('usershicai/delete', [this.id]).then(res => {\r\n\t\t\t\t\tif (res.data && res.data.code === 0) {\r\n\t\t\t\t\t\tthis.$message.success('删除成功');\r\n\t\t\t\t\t\tthis.$router.push('/index/usershicaiList');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\tedit() {\r\n\t\t\tthis.$router.push({path: '/index/usershicaiAdd', query: {id: this.id}});\r\n\t\t},\r\n\t\tback() {\r\n\t\t\tthis.$router.go(-1);\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n"],"mappings":"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","ignoreList":[]}]}