{"remainingRequest":"D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\thread-loader\\dist\\cjs.js!D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\src\\pages\\dietstatistics\\list.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\src\\pages\\dietstatistics\\list.vue","mtime":1766831687138},{"path":"D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\babel.config.js","mtime":1766811488312},{"path":"D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766827789760},{"path":"D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1766827789760},{"path":"D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1766827793571},{"path":"D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766827789760},{"path":"D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1766827794095}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IucmVkdWNlLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBiYXNlVXJsOiAnJywKICAgICAgZGF0YUxpc3Q6IFtdLAogICAgICBmb3JtU2VhcmNoOiB7fSwKICAgICAgZGF0ZVJhbmdlOiBbXSwKICAgICAgcGFnZVNpemU6IDEwLAogICAgICB0b3RhbDogMCwKICAgICAgdG90YWxSZWNvcmRzOiAwLAogICAgICB0b3RhbENhbG9yaWVzOiAwLAogICAgICBhdmdDYWxvcmllczogMAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmJhc2VVcmwgPSB0aGlzLiRjb25maWcuYmFzZVVybDsKICAgIHRoaXMuZ2V0U3RhdHMoKTsKICAgIHRoaXMuZ2V0TGlzdCgxKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOiOt+WPlue7n+iuoeaVsOaNrgogICAgZ2V0U3RhdHMoKSB7CiAgICAgIGxldCB1c2VyaWQgPSB0aGlzLiRzdG9yYWdlLmdldCgndXNlcmlkJyk7CiAgICAgIHRoaXMuJGh0dHAuZ2V0KGBkaWV0c3RhdGlzdGljcy9saXN0QnlVc2VyP3VzZXJpZD0ke3VzZXJpZH1gKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5kYXRhICYmIHJlcy5kYXRhLmNvZGUgPT09IDApIHsKICAgICAgICAgIGxldCBsaXN0ID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgIHRoaXMudG90YWxSZWNvcmRzID0gbGlzdC5sZW5ndGg7CiAgICAgICAgICB0aGlzLnRvdGFsQ2Fsb3JpZXMgPSBsaXN0LnJlZHVjZSgoc3VtLCBpdGVtKSA9PiBzdW0gKyAoaXRlbS5jYWxvcmllcyB8fCAwKSwgMCk7CiAgICAgICAgICB0aGlzLmF2Z0NhbG9yaWVzID0gdGhpcy50b3RhbFJlY29yZHMgPiAwID8gTWF0aC5yb3VuZCh0aGlzLnRvdGFsQ2Fsb3JpZXMgLyB0aGlzLnRvdGFsUmVjb3JkcykgOiAwOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g6I635Y+W5YiX6KGoCiAgICBnZXRMaXN0KHBhZ2UpIHsKICAgICAgbGV0IHVzZXJpZCA9IHRoaXMuJHN0b3JhZ2UuZ2V0KCd1c2VyaWQnKTsKICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICBwYWdlOiBwYWdlIHx8IDEsCiAgICAgICAgbGltaXQ6IHRoaXMucGFnZVNpemUsCiAgICAgICAgdXNlcmlkOiB1c2VyaWQKICAgICAgfTsKICAgICAgaWYgKHRoaXMuZGF0ZVJhbmdlICYmIHRoaXMuZGF0ZVJhbmdlLmxlbmd0aCA9PT0gMikgewogICAgICAgIHBhcmFtcy5zdGFydERhdGUgPSB0aGlzLmRhdGVSYW5nZVswXTsKICAgICAgICBwYXJhbXMuZW5kRGF0ZSA9IHRoaXMuZGF0ZVJhbmdlWzFdOwogICAgICB9CiAgICAgIHRoaXMuJGh0dHAuZ2V0KCdkaWV0c3RhdGlzdGljcy9wYWdlJywgewogICAgICAgIHBhcmFtcwogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5kYXRhICYmIHJlcy5kYXRhLmNvZGUgPT09IDApIHsKICAgICAgICAgIHRoaXMuZGF0YUxpc3QgPSByZXMuZGF0YS5kYXRhLmxpc3Q7CiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLmRhdGEuZGF0YS50b3RhbDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOagvOW8j+WMluaXpeacnwogICAgZm9ybWF0RGF0ZShkYXRlKSB7CiAgICAgIGlmICghZGF0ZSkgcmV0dXJuICcnOwogICAgICBsZXQgZCA9IG5ldyBEYXRlKGRhdGUpOwogICAgICByZXR1cm4gZC5nZXRGdWxsWWVhcigpICsgJy0nICsgU3RyaW5nKGQuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJykgKyAnLScgKyBTdHJpbmcoZC5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICB9LAogICAgLy8g6I635Y+W6aSQ5qyh6aKc6ImyCiAgICBnZXRNZWFsVHlwZUNvbG9yKG1lYWxUeXBlKSB7CiAgICAgIGNvbnN0IGNvbG9ycyA9IHsKICAgICAgICAnYnJlYWtmYXN0JzogJ3N1Y2Nlc3MnLAogICAgICAgICdsdW5jaCc6ICd3YXJuaW5nJywKICAgICAgICAnZGlubmVyJzogJ2RhbmdlcicsCiAgICAgICAgJ3NuYWNrJzogJ2luZm8nCiAgICAgIH07CiAgICAgIHJldHVybiBjb2xvcnNbbWVhbFR5cGVdIHx8ICcnOwogICAgfSwKICAgIC8vIOiOt+WPlumkkOasoeaWh+acrAogICAgZ2V0TWVhbFR5cGVUZXh0KG1lYWxUeXBlKSB7CiAgICAgIGNvbnN0IHRleHRzID0gewogICAgICAgICdicmVha2Zhc3QnOiAn5pep6aSQJywKICAgICAgICAnbHVuY2gnOiAn5Y2I6aSQJywKICAgICAgICAnZGlubmVyJzogJ+aZmumkkCcsCiAgICAgICAgJ3NuYWNrJzogJ+WKoOmkkCcKICAgICAgfTsKICAgICAgcmV0dXJuIHRleHRzW21lYWxUeXBlXSB8fCBtZWFsVHlwZTsKICAgIH0sCiAgICAvLyDliKDpmaQKICAgIGRlbChpZCkgewogICAgICB0aGlzLiRjb25maXJtKCfnoa7lrprliKDpmaTlkJc/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuJGh0dHAucG9zdCgnZGlldHN0YXRpc3RpY3MvZGVsZXRlJywgW2lkXSkudGhlbihyZXMgPT4gewogICAgICAgICAgaWYgKHJlcy5kYXRhICYmIHJlcy5kYXRhLmNvZGUgPT09IDApIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfliKDpmaTmiJDlip8nKTsKICAgICAgICAgICAgdGhpcy5nZXRTdGF0cygpOwogICAgICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5re75YqgCiAgICBhZGQoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvaW5kZXgvZGlldFN0YXRpc3RpY3NBZGQnKTsKICAgIH0sCiAgICAvLyDnvJbovpEKICAgIGVkaXQocm93KSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAnL2luZGV4L2RpZXRTdGF0aXN0aWNzQWRkJywKICAgICAgICBxdWVyeTogewogICAgICAgICAgaWQ6IHJvdy5pZAogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g6K+m5oOFCiAgICB0b0RldGFpbChyb3cpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvaW5kZXgvZGlldFN0YXRpc3RpY3NEZXRhaWwnLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBpZDogcm93LmlkCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDliIbpobUKICAgIGN1ckNoYW5nZShwYWdlKSB7CiAgICAgIHRoaXMuZ2V0TGlzdChwYWdlKTsKICAgIH0sCiAgICBzaXplQ2hhbmdlKHNpemUpIHsKICAgICAgdGhpcy5wYWdlU2l6ZSA9IHNpemU7CiAgICAgIHRoaXMuZ2V0TGlzdCgxKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["data","baseUrl","dataList","formSearch","dateRange","pageSize","total","totalRecords","totalCalories","avgCalories","created","$config","getStats","getList","methods","userid","$storage","get","$http","then","res","code","list","length","reduce","sum","item","calories","Math","round","page","params","limit","startDate","endDate","formatDate","date","d","Date","getFullYear","String","getMonth","padStart","getDate","getMealTypeColor","mealType","colors","getMealTypeText","texts","del","id","$confirm","confirmButtonText","cancelButtonText","type","post","$message","success","add","$router","push","edit","row","path","query","toDetail","curChange","sizeChange","size"],"sources":["src/pages/dietstatistics/list.vue"],"sourcesContent":["<template>\r\n<div>\r\n\t<div :style='{\"padding\":\"12px\",\"margin\":\"10px auto\",\"borderColor\":\"#dbd9f4\",\"borderRadius\":\"8px\",\"background\":\"#fff\",\"borderWidth\":\"0 0 2px\",\"width\":\"1200px\",\"borderStyle\":\"solid\"}' class=\"breadcrumb-preview\">\r\n\t\t<el-breadcrumb :separator=\"'Ξ'\" :style='{\"width\":\"100%\",\"margin\":\"0 auto\",\"fontSize\":\"14px\",\"lineHeight\":\"1\",\"display\":\"flex\"}'>\r\n\t\t\t<el-breadcrumb-item>首页</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>饮食统计</el-breadcrumb-item>\r\n\t\t</el-breadcrumb>\r\n\t</div>\r\n\t\r\n\t<div class=\"list-preview\" :style='{\"width\":\"1200px\",\"margin\":\"10px auto\",\"position\":\"relative\",\"background\":\"none\"}'>\r\n\t\t<!-- 统计卡片 -->\r\n\t\t<div class=\"stats-cards\" :style='{\"display\":\"flex\",\"justifyContent\":\"space-between\",\"marginBottom\":\"20px\",\"flexWrap\":\"wrap\"}'>\r\n\t\t\t<div class=\"stat-card\" :style='{\"flex\":\"1\",\"padding\":\"20px\",\"margin\":\"10px\",\"borderRadius\":\"8px\",\"background\":\"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\"color\":\"#fff\",\"textAlign\":\"center\",\"minWidth\":\"200px\"}'>\r\n\t\t\t\t<div :style='{\"fontSize\":\"32px\",\"fontWeight\":\"bold\"}'>{{totalRecords}}</div>\r\n\t\t\t\t<div :style='{\"fontSize\":\"14px\",\"marginTop\":\"8px\"}'>总记录数</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"stat-card\" :style='{\"flex\":\"1\",\"padding\":\"20px\",\"margin\":\"10px\",\"borderRadius\":\"8px\",\"background\":\"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)\",\"color\":\"#fff\",\"textAlign\":\"center\",\"minWidth\":\"200px\"}'>\r\n\t\t\t\t<div :style='{\"fontSize\":\"32px\",\"fontWeight\":\"bold\"}'>{{totalCalories}}</div>\r\n\t\t\t\t<div :style='{\"fontSize\":\"14px\",\"marginTop\":\"8px\"}'>总卡路里 (kcal)</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"stat-card\" :style='{\"flex\":\"1\",\"padding\":\"20px\",\"margin\":\"10px\",\"borderRadius\":\"8px\",\"background\":\"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)\",\"color\":\"#fff\",\"textAlign\":\"center\",\"minWidth\":\"200px\"}'>\r\n\t\t\t\t<div :style='{\"fontSize\":\"32px\",\"fontWeight\":\"bold\"}'>{{avgCalories}}</div>\r\n\t\t\t\t<div :style='{\"fontSize\":\"14px\",\"marginTop\":\"8px\"}'>平均卡路里</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 搜索表单 -->\r\n\t\t<el-form :inline=\"true\" :model=\"formSearch\" class=\"list-form-pv\" :style='{\"border\":\"2px solid #dbd9f4\",\"padding\":\"10px\",\"margin\":\"10px 0 0 0\",\"alignItems\":\"center\",\"borderRadius\":\"8px\",\"flexWrap\":\"wrap\",\"background\":\"#f8f8fc\",\"display\":\"flex\",\"width\":\"100%\",\"height\":\"auto\"}'>\r\n\t\t\t<el-form-item :style='{\"margin\":\"10px\"}'>\r\n\t\t\t\t<div class=\"lable\" v-if=\"true\" :style='{\"width\":\"auto\",\"padding\":\"0 10px\",\"lineHeight\":\"42px\",\"display\":\"inline-block\"}'>日期范围</div>\r\n\t\t\t\t<el-date-picker\r\n\t\t\t\t\tv-model=\"dateRange\"\r\n\t\t\t\t\ttype=\"daterange\"\r\n\t\t\t\t\trange-separator=\"至\"\r\n\t\t\t\t\tstart-placeholder=\"开始日期\"\r\n\t\t\t\t\tend-placeholder=\"结束日期\"\r\n\t\t\t\t\tvalue-format=\"yyyy-MM-dd\">\r\n\t\t\t\t</el-date-picker>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-button :style='{\"cursor\":\"pointer\",\"border\":\"0\",\"padding\":\"0px 15px\",\"margin\":\"0 10px 0 0\",\"outline\":\"none\",\"color\":\"#666\",\"borderRadius\":\"6px\",\"background\":\"linear-gradient(90deg, rgba(255,233,100,1) 0%, rgba(194,248,126,1) 29%, rgba(181,233,252,1) 61%, rgba(246,172,218,1) 100%)\",\"width\":\"auto\",\"fontSize\":\"14px\",\"lineHeight\":\"42px\",\"height\":\"42px\"}' type=\"primary\" @click=\"getList(1)\"><i :style='{\"color\":\"#666\",\"margin\":\"0 10px 0 0\",\"fontSize\":\"14px\"}' class=\"el-icon-search\"></i>查询</el-button>\r\n\t\t\t<el-button :style='{\"cursor\":\"pointer\",\"border\":\"0\",\"padding\":\"0px 15px\",\"margin\":\"0 10px 0 0\",\"outline\":\"none\",\"color\":\"#666\",\"borderRadius\":\"6px\",\"background\":\"linear-gradient(90deg, rgba(255,233,100,1) 0%, rgba(194,248,126,1) 29%, rgba(181,233,252,1) 61%, rgba(246,172,218,1) 100%)\",\"width\":\"auto\",\"fontSize\":\"14px\",\"lineHeight\":\"42px\",\"height\":\"42px\"}' type=\"primary\" @click=\"add()\"><i :style='{\"color\":\"#666\",\"margin\":\"0 10px 0 0\",\"fontSize\":\"14px\"}' class=\"el-icon-circle-plus-outline\"></i>添加记录</el-button>\r\n\t\t</el-form>\r\n\r\n\t\t<!-- 饮食记录列表 -->\r\n\t\t<div class=\"list\" :style='{\"border\":\"2px solid #dbd9f4\",\"margin\":\"20px 0 0 0\",\"borderRadius\":\"8px\",\"background\":\"#fff\"}'>\r\n\t\t\t<el-table :data=\"dataList\" style=\"width: 100%\" :header-cell-style=\"{'background':'#f8f8fc','color':'#333'}\">\r\n\t\t\t\t<el-table-column prop=\"recordDate\" label=\"日期\" width=\"180\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t{{formatDate(scope.row.recordDate)}}\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"mealType\" label=\"餐次\" width=\"120\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-tag :type=\"getMealTypeColor(scope.row.mealType)\">{{getMealTypeText(scope.row.mealType)}}</el-tag>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"foodName\" label=\"食物名称\" width=\"200\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"calories\" label=\"卡路里 (kcal)\" width=\"150\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<span :style='{\"fontWeight\":\"bold\",\"color\":\"#f56c6c\"}'>{{scope.row.calories}}</span>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"protein\" label=\"蛋白质 (g)\" width=\"120\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"carbs\" label=\"碳水 (g)\" width=\"120\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"fat\" label=\"脂肪 (g)\" width=\"120\"></el-table-column>\r\n\t\t\t\t<el-table-column label=\"操作\" width=\"200\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-button size=\"mini\" @click=\"toDetail(scope.row)\">详情</el-button>\r\n\t\t\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"edit(scope.row)\">编辑</el-button>\r\n\t\t\t\t\t\t<el-button size=\"mini\" type=\"danger\" @click=\"del(scope.row.id)\">删除</el-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\t\t</div>\r\n\r\n\t\t<el-pagination\r\n\t\t\tbackground\r\n\t\t\tclass=\"pagination\"\r\n\t\t\t:pager-count=\"7\"\r\n\t\t\t:page-size=\"pageSize\"\r\n\t\t\t:page-sizes=\"[10, 20, 50, 100]\"\r\n\t\t\tprev-text=\"<\"\r\n\t\t\tnext-text=\">\"\r\n\t\t\t:hide-on-single-page=\"false\"\r\n\t\t\tlayout=\"total, prev, pager, next, sizes, jumper\"\r\n\t\t\t:total=\"total\"\r\n\t\t\t:style='{\"width\":\"1200px\",\"padding\":\"0\",\"margin\":\"20px auto\",\"whiteSpace\":\"nowrap\",\"color\":\"#333\",\"fontWeight\":\"500\"}'\r\n\t\t\t@current-change=\"curChange\"\r\n\t\t\t@size-change=\"sizeChange\"\r\n\t\t></el-pagination>\r\n\t</div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tbaseUrl: '',\r\n\t\t\tdataList: [],\r\n\t\t\tformSearch: {},\r\n\t\t\tdateRange: [],\r\n\t\t\tpageSize: 10,\r\n\t\t\ttotal: 0,\r\n\t\t\ttotalRecords: 0,\r\n\t\t\ttotalCalories: 0,\r\n\t\t\tavgCalories: 0\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\tthis.baseUrl = this.$config.baseUrl;\r\n\t\tthis.getStats();\r\n\t\tthis.getList(1);\r\n\t},\r\n\tmethods: {\r\n\t\t// 获取统计数据\r\n\t\tgetStats() {\r\n\t\t\tlet userid = this.$storage.get('userid');\r\n\t\t\tthis.$http.get(`dietstatistics/listByUser?userid=${userid}`).then(res => {\r\n\t\t\t\tif (res.data && res.data.code === 0) {\r\n\t\t\t\t\tlet list = res.data.data;\r\n\t\t\t\t\tthis.totalRecords = list.length;\r\n\t\t\t\t\tthis.totalCalories = list.reduce((sum, item) => sum + (item.calories || 0), 0);\r\n\t\t\t\t\tthis.avgCalories = this.totalRecords > 0 ? Math.round(this.totalCalories / this.totalRecords) : 0;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 获取列表\r\n\t\tgetList(page) {\r\n\t\t\tlet userid = this.$storage.get('userid');\r\n\t\t\tlet params = {\r\n\t\t\t\tpage: page || 1,\r\n\t\t\t\tlimit: this.pageSize,\r\n\t\t\t\tuserid: userid\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tif (this.dateRange && this.dateRange.length === 2) {\r\n\t\t\t\tparams.startDate = this.dateRange[0];\r\n\t\t\t\tparams.endDate = this.dateRange[1];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.$http.get('dietstatistics/page', {params}).then(res => {\r\n\t\t\t\tif (res.data && res.data.code === 0) {\r\n\t\t\t\t\tthis.dataList = res.data.data.list;\r\n\t\t\t\t\tthis.total = res.data.data.total;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 格式化日期\r\n\t\tformatDate(date) {\r\n\t\t\tif (!date) return '';\r\n\t\t\tlet d = new Date(date);\r\n\t\t\treturn d.getFullYear() + '-' + \r\n\t\t\t\t   String(d.getMonth() + 1).padStart(2, '0') + '-' + \r\n\t\t\t\t   String(d.getDate()).padStart(2, '0');\r\n\t\t},\r\n\t\t// 获取餐次颜色\r\n\t\tgetMealTypeColor(mealType) {\r\n\t\t\tconst colors = {\r\n\t\t\t\t'breakfast': 'success',\r\n\t\t\t\t'lunch': 'warning',\r\n\t\t\t\t'dinner': 'danger',\r\n\t\t\t\t'snack': 'info'\r\n\t\t\t};\r\n\t\t\treturn colors[mealType] || '';\r\n\t\t},\r\n\t\t// 获取餐次文本\r\n\t\tgetMealTypeText(mealType) {\r\n\t\t\tconst texts = {\r\n\t\t\t\t'breakfast': '早餐',\r\n\t\t\t\t'lunch': '午餐',\r\n\t\t\t\t'dinner': '晚餐',\r\n\t\t\t\t'snack': '加餐'\r\n\t\t\t};\r\n\t\t\treturn texts[mealType] || mealType;\r\n\t\t},\r\n\t\t// 删除\r\n\t\tdel(id) {\r\n\t\t\tthis.$confirm('确定删除吗?', '提示', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t}).then(() => {\r\n\t\t\t\tthis.$http.post('dietstatistics/delete', [id]).then(res => {\r\n\t\t\t\t\tif (res.data && res.data.code === 0) {\r\n\t\t\t\t\t\tthis.$message.success('删除成功');\r\n\t\t\t\t\t\tthis.getStats();\r\n\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 添加\r\n\t\tadd() {\r\n\t\t\tthis.$router.push('/index/dietStatisticsAdd');\r\n\t\t},\r\n\t\t// 编辑\r\n\t\tedit(row) {\r\n\t\t\tthis.$router.push({path: '/index/dietStatisticsAdd', query: {id: row.id}});\r\n\t\t},\r\n\t\t// 详情\r\n\t\ttoDetail(row) {\r\n\t\t\tthis.$router.push({path: '/index/dietStatisticsDetail', query: {id: row.id}});\r\n\t\t},\r\n\t\t// 分页\r\n\t\tcurChange(page) {\r\n\t\t\tthis.getList(page);\r\n\t\t},\r\n\t\tsizeChange(size) {\r\n\t\t\tthis.pageSize = size;\r\n\t\t\tthis.getList(1);\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.stats-cards {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\tmargin-bottom: 20px;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}