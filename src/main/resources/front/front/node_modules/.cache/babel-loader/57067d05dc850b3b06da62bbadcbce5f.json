{"remainingRequest":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\src\\pages\\usershicai\\receipt.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\src\\pages\\usershicai\\receipt.vue","mtime":1766836761818},{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\babel.config.js","mtime":1766811488312},{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766827789760},{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1766827793571},{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766827789760},{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1766827794095}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5tYXAuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJhc2VVcmw6ICcnLAogICAgICB1cGxvYWRVcmw6ICcnLAogICAgICB1cGxvYWRpbmc6IGZhbHNlLAogICAgICBzYXZpbmc6IGZhbHNlLAogICAgICByZWNvZ25pemVkSXRlbXM6IFtdLAogICAgICBjb21tb25QdXJjaGFzZURhdGU6ICcnLAogICAgICBjb21tb25TdGF0dXM6ICduZXcnCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuYmFzZVVybCA9IHRoaXMuJGNvbmZpZy5iYXNlVXJsOwogICAgdGhpcy51cGxvYWRVcmwgPSB0aGlzLmJhc2VVcmwgKyAnL29jci9yZWNvZ25pemVSZWNlaXB0JzsKICAgIHRoaXMuY29tbW9uUHVyY2hhc2VEYXRlID0gdGhpcy5mb3JtYXREYXRlVGltZShuZXcgRGF0ZSgpKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGJlZm9yZVVwbG9hZChmaWxlKSB7CiAgICAgIGNvbnN0IGlzSW1hZ2UgPSBmaWxlLnR5cGUuaW5kZXhPZignaW1hZ2UnKSAhPT0gLTE7CiAgICAgIGNvbnN0IGlzTHQ1TSA9IGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgNTsKICAgICAgaWYgKCFpc0ltYWdlKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5Y+q6IO95LiK5Lyg5Zu+54mH5paH5Lu277yBJyk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmICghaXNMdDVNKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5Zu+54mH5aSn5bCP5LiN6IO96LaF6L+HIDVNQu+8gScpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICB0aGlzLnVwbG9hZGluZyA9IHRydWU7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIGhhbmRsZVVwbG9hZFN1Y2Nlc3MocmVzcG9uc2UsIGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIHRoaXMudXBsb2FkaW5nID0gZmFsc2U7CiAgICAgIGlmIChyZXNwb25zZS5jb2RlID09PSAwKSB7CiAgICAgICAgY29uc3QgaXRlbXMgPSByZXNwb25zZS5pdGVtcyB8fCBbXTsKICAgICAgICBpZiAoaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+acquivhuWIq+WIsOmjn+adkOS/oeaBr++8jOivt+ajgOafpeWbvueJh+aYr+WQpua4heaZsCcpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLnJlY29nbml6ZWRJdGVtcyA9IGl0ZW1zLm1hcChpdGVtID0+ICh7CiAgICAgICAgICBzaGljYWlOYW1lOiBpdGVtLm5hbWUgfHwgJycsCiAgICAgICAgICBxdWFudGl0eTogaXRlbS5xdWFudGl0eSB8fCAxLAogICAgICAgICAgdW5pdDogaXRlbS51bml0IHx8ICfkuKonLAogICAgICAgICAgcHVyY2hhc2VEYXRlOiB0aGlzLmNvbW1vblB1cmNoYXNlRGF0ZSwKICAgICAgICAgIGV4cGlyeURhdGU6IHRoaXMuY2FsY3VsYXRlRXhwaXJ5RGF0ZSh0aGlzLmNvbW1vblB1cmNoYXNlRGF0ZSwgNyksCiAgICAgICAgICBzdGF0dXM6ICduZXcnCiAgICAgICAgfSkpOwogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcyhg6K+G5Yir5oiQ5Yqf77yB5YWx6K+G5Yir5YiwICR7aXRlbXMubGVuZ3RofSDpobnpo5/mnZBgKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3BvbnNlLm1zZyB8fCAn6K+G5Yir5aSx6LSlJyk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVVcGxvYWRFcnJvcihlcnIsIGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIHRoaXMudXBsb2FkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOWksei0pe+8micgKyBlcnIubWVzc2FnZSk7CiAgICB9LAogICAgYXBwbHlDb21tb25TZXR0aW5ncygpIHsKICAgICAgdGhpcy5yZWNvZ25pemVkSXRlbXMuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICBpdGVtLnB1cmNoYXNlRGF0ZSA9IHRoaXMuY29tbW9uUHVyY2hhc2VEYXRlOwogICAgICAgIGl0ZW0uc3RhdHVzID0gdGhpcy5jb21tb25TdGF0dXM7CiAgICAgICAgaXRlbS5leHBpcnlEYXRlID0gdGhpcy5jYWxjdWxhdGVFeHBpcnlEYXRlKHRoaXMuY29tbW9uUHVyY2hhc2VEYXRlLCA3KTsKICAgICAgfSk7CiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5bey5bqU55So57uf5LiA6K6+572uJyk7CiAgICB9LAogICAgY2FsY3VsYXRlRXhwaXJ5RGF0ZShwdXJjaGFzZURhdGUsIGRheXMpIHsKICAgICAgaWYgKCFwdXJjaGFzZURhdGUpIHJldHVybiAnJzsKICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZShwdXJjaGFzZURhdGUpOwogICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyBkYXlzKTsKICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0RGF0ZVRpbWUoZGF0ZSk7CiAgICB9LAogICAgcmVtb3ZlSXRlbShpbmRleCkgewogICAgICB0aGlzLnJlY29nbml6ZWRJdGVtcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSwKICAgIGNsZWFyUmVzdWx0cygpIHsKICAgICAgdGhpcy4kY29uZmlybSgn56Gu5a6a5riF56m65omA5pyJ6K+G5Yir57uT5p6c5ZCX77yfJywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMucmVjb2duaXplZEl0ZW1zID0gW107CiAgICAgIH0pOwogICAgfSwKICAgIGJhdGNoQWRkKCkgewogICAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMucmVjb2duaXplZEl0ZW1zKSB7CiAgICAgICAgaWYgKCFpdGVtLnNoaWNhaU5hbWUpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+Whq+WGmeaJgOaciemjn+adkOWQjeensCcpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoIWl0ZW0ucHVyY2hhc2VEYXRlKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7fpgInmi6notK3kubDml6XmnJ8nKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5zYXZpbmcgPSB0cnVlOwogICAgICBsZXQgdXNlcmlkID0gdGhpcy4kc3RvcmFnZS5nZXQoJ3VzZXJpZCcpOwogICAgICBsZXQgaXRlbXMgPSB0aGlzLnJlY29nbml6ZWRJdGVtcy5tYXAoaXRlbSA9PiAoewogICAgICAgIC4uLml0ZW0sCiAgICAgICAgdXNlcmlkOiB1c2VyaWQKICAgICAgfSkpOwogICAgICB0aGlzLiRodHRwLnBvc3QoJ3VzZXJzaGljYWkvYmF0Y2hTYXZlJywgaXRlbXMpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnNhdmluZyA9IGZhbHNlOwogICAgICAgIGlmIChyZXMuZGF0YSAmJiByZXMuZGF0YS5jb2RlID09PSAwKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aJuemHj+a3u+WKoOaIkOWKn++8gScpOwogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9pbmRleC91c2Vyc2hpY2FpTGlzdCcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5kYXRhLm1zZyB8fCAn5re75Yqg5aSx6LSlJyk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgdGhpcy5zYXZpbmcgPSBmYWxzZTsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmt7vliqDlpLHotKUnKTsKICAgICAgfSk7CiAgICB9LAogICAgYmFjaygpIHsKICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgIH0sCiAgICBmb3JtYXREYXRlVGltZShkYXRlKSB7CiAgICAgIGxldCBkID0gbmV3IERhdGUoZGF0ZSk7CiAgICAgIHJldHVybiBkLmdldEZ1bGxZZWFyKCkgKyAnLScgKyBTdHJpbmcoZC5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKSArICctJyArIFN0cmluZyhkLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKSArICcgJyArIFN0cmluZyhkLmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsICcwJykgKyAnOicgKyBTdHJpbmcoZC5nZXRNaW51dGVzKCkpLnBhZFN0YXJ0KDIsICcwJykgKyAnOicgKyBTdHJpbmcoZC5nZXRTZWNvbmRzKCkpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["data","baseUrl","uploadUrl","uploading","saving","recognizedItems","commonPurchaseDate","commonStatus","created","$config","formatDateTime","Date","methods","beforeUpload","file","isImage","type","indexOf","isLt5M","size","$message","error","handleUploadSuccess","response","fileList","code","items","length","warning","map","item","shicaiName","name","quantity","unit","purchaseDate","expiryDate","calculateExpiryDate","status","success","msg","handleUploadError","err","message","applyCommonSettings","forEach","days","date","setDate","getDate","removeItem","index","splice","clearResults","$confirm","confirmButtonText","cancelButtonText","then","batchAdd","userid","$storage","get","$http","post","res","$router","push","catch","back","go","d","getFullYear","String","getMonth","padStart","getHours","getMinutes","getSeconds"],"sources":["src/pages/usershicai/receipt.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div :style='{\"padding\":\"12px\",\"margin\":\"10px auto\",\"borderColor\":\"#dbd9f4\",\"borderRadius\":\"8px\",\"background\":\"#fff\",\"borderWidth\":\"0 0 2px\",\"width\":\"1200px\",\"borderStyle\":\"solid\"}' class=\"breadcrumb-preview\">\r\n      <el-breadcrumb :separator=\"'Œû'\" :style='{\"width\":\"100%\",\"margin\":\"0 auto\",\"fontSize\":\"14px\",\"lineHeight\":\"1\",\"display\":\"flex\"}'>\r\n        <el-breadcrumb-item>È¶ñÈ°µ</el-breadcrumb-item>\r\n        <el-breadcrumb-item>ÊàëÁöÑÈ£üÊùêÂ∫ì</el-breadcrumb-item>\r\n        <el-breadcrumb-item>Â∞èÁ•®ËØÜÂà´ÂΩïÂÖ•</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n    </div>\r\n    \r\n    <div class=\"receipt-preview\" :style='{\"width\":\"1200px\",\"margin\":\"10px auto\",\"position\":\"relative\",\"background\":\"none\"}'>\r\n      \r\n      <el-card :style='{\"marginBottom\":\"20px\"}'>\r\n        <div slot=\"header\">\r\n          <span :style='{\"fontSize\":\"18px\",\"fontWeight\":\"bold\"}'>üì∏ ‰∏ä‰º†Ë¥≠Áâ©Â∞èÁ•®</span>\r\n        </div>\r\n        \r\n        <div class=\"upload-area\">\r\n          <el-upload\r\n            class=\"upload-demo\"\r\n            drag\r\n            :action=\"uploadUrl\"\r\n            :headers=\"headers\"\r\n            :on-success=\"handleUploadSuccess\"\r\n            :on-error=\"handleUploadError\"\r\n            :before-upload=\"beforeUpload\"\r\n            :show-file-list=\"false\"\r\n            accept=\"image/*\">\r\n            <i class=\"el-icon-upload\" style=\"font-size: 67px; color: #C0C4CC;\"></i>\r\n            <div class=\"el-upload__text\">Â∞ÜÂ∞èÁ•®ÂõæÁâáÊãñÂà∞Ê≠§Â§ÑÔºåÊàñ<em>ÁÇπÂáª‰∏ä‰º†</em></div>\r\n            <div class=\"el-upload__tip\" slot=\"tip\" style=\"font-size: 12px; color: #606266; margin-top: 7px;\">ÊîØÊåÅ JPG„ÄÅPNG Ê†ºÂºèÔºåÂª∫ËÆÆÂõæÁâáÊ∏ÖÊô∞„ÄÅÂÖâÁ∫øÂÖÖË∂≥</div>\r\n          </el-upload>\r\n          \r\n          <div v-if=\"uploading\" :style='{\"textAlign\":\"center\",\"marginTop\":\"20px\"}'>\r\n            <i class=\"el-icon-loading\" :style='{\"fontSize\":\"32px\",\"color\":\"#409EFF\"}'></i>\r\n            <div :style='{\"marginTop\":\"10px\",\"color\":\"#666\"}'>Ê≠£Âú®ËØÜÂà´‰∏≠ÔºåËØ∑Á®çÂÄô...</div>\r\n          </div>\r\n        </div>\r\n      </el-card>\r\n      \r\n      <el-card v-if=\"recognizedItems.length > 0\">\r\n        <div slot=\"header\">\r\n          <span :style='{\"fontSize\":\"18px\",\"fontWeight\":\"bold\"}'>‚úÖ ËØÜÂà´ÁªìÊûú</span>\r\n          <el-button style=\"float: right; padding: 3px 0\" type=\"text\" @click=\"clearResults\">Ê∏ÖÁ©∫</el-button>\r\n        </div>\r\n        \r\n        <div :style='{\"marginBottom\":\"20px\"}'>\r\n          <el-alert title=\"ËØ∑Ê£ÄÊü•Âπ∂‰øÆÊîπËØÜÂà´ÁªìÊûúÔºåÁ°ÆËÆ§Êó†ËØØÂêéÁÇπÂáªÊâπÈáèÊ∑ªÂä†\" type=\"info\" :closable=\"false\"></el-alert>\r\n        </div>\r\n        \r\n        <el-form :inline=\"true\" :style='{\"marginBottom\":\"20px\",\"padding\":\"15px\",\"background\":\"#f5f7fa\",\"borderRadius\":\"4px\"}'>\r\n          <el-form-item label=\"Ë¥≠‰π∞Êó•Êúü\">\r\n            <el-date-picker v-model=\"commonPurchaseDate\" type=\"datetime\" placeholder=\"ÈÄâÊã©Ë¥≠‰π∞Êó•Êúü\" value-format=\"yyyy-MM-dd HH:mm:ss\" :style='{\"width\":\"200px\"}'></el-date-picker>\r\n          </el-form-item>\r\n          <el-form-item label=\"ÈªòËÆ§Áä∂ÊÄÅ\">\r\n            <el-select v-model=\"commonStatus\" placeholder=\"ÈÄâÊã©Áä∂ÊÄÅ\" :style='{\"width\":\"120px\"}'>\r\n              <el-option label=\"Êñ∞È≤ú\" value=\"new\"></el-option>\r\n              <el-option label=\"Â∑≤‰ΩøÁî®\" value=\"used\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-button type=\"primary\" size=\"small\" @click=\"applyCommonSettings\">Â∫îÁî®Âà∞ÂÖ®ÈÉ®</el-button>\r\n        </el-form>\r\n        \r\n        <el-table :data=\"recognizedItems\" border :style='{\"width\":\"100%\"}'>\r\n          <el-table-column type=\"index\" label=\"Â∫èÂè∑\" width=\"60\"></el-table-column>\r\n          <el-table-column label=\"È£üÊùêÂêçÁß∞\" width=\"200\">\r\n            <template slot-scope=\"scope\">\r\n              <el-input v-model=\"scope.row.shicaiName\" size=\"small\"></el-input>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"Êï∞Èáè\" width=\"120\">\r\n            <template slot-scope=\"scope\">\r\n              <el-input-number v-model=\"scope.row.quantity\" :min=\"1\" size=\"small\" :style='{\"width\":\"100%\"}'></el-input-number>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"Âçï‰Ωç\" width=\"120\">\r\n            <template slot-scope=\"scope\">\r\n              <el-select v-model=\"scope.row.unit\" size=\"small\" :style='{\"width\":\"100%\"}'>\r\n                <el-option label=\"ÂÖã\" value=\"ÂÖã\"></el-option>\r\n                <el-option label=\"ÂçÉÂÖã\" value=\"ÂçÉÂÖã\"></el-option>\r\n                <el-option label=\"Êñ§\" value=\"Êñ§\"></el-option>\r\n                <el-option label=\"‰∏™\" value=\"‰∏™\"></el-option>\r\n                <el-option label=\"Ë¢ã\" value=\"Ë¢ã\"></el-option>\r\n                <el-option label=\"Áõí\" value=\"Áõí\"></el-option>\r\n              </el-select>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"Ë¥≠‰π∞Êó•Êúü\" width=\"180\">\r\n            <template slot-scope=\"scope\">\r\n              <el-date-picker v-model=\"scope.row.purchaseDate\" type=\"datetime\" size=\"small\" value-format=\"yyyy-MM-dd HH:mm:ss\" :style='{\"width\":\"100%\"}'></el-date-picker>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"ËøáÊúüÊó•Êúü\" width=\"180\">\r\n            <template slot-scope=\"scope\">\r\n              <el-date-picker v-model=\"scope.row.expiryDate\" type=\"datetime\" size=\"small\" value-format=\"yyyy-MM-dd HH:mm:ss\" :style='{\"width\":\"100%\"}'></el-date-picker>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"Áä∂ÊÄÅ\" width=\"120\">\r\n            <template slot-scope=\"scope\">\r\n              <el-select v-model=\"scope.row.status\" size=\"small\" :style='{\"width\":\"100%\"}'>\r\n                <el-option label=\"Êñ∞È≤ú\" value=\"new\"></el-option>\r\n                <el-option label=\"Â∑≤‰ΩøÁî®\" value=\"used\"></el-option>\r\n              </el-select>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"Êìç‰Ωú\" width=\"100\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button type=\"danger\" size=\"mini\" @click=\"removeItem(scope.$index)\">Âà†Èô§</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        \r\n        <div :style='{\"marginTop\":\"20px\",\"textAlign\":\"center\"}'>\r\n          <el-button type=\"primary\" size=\"large\" @click=\"batchAdd\" :loading=\"saving\">\r\n            <i class=\"el-icon-check\"></i> ÊâπÈáèÊ∑ªÂä† ({{recognizedItems.length}}È°π)\r\n          </el-button>\r\n          <el-button size=\"large\" @click=\"back\">ËøîÂõû</el-button>\r\n        </div>\r\n      </el-card>\r\n      \r\n      <el-card v-if=\"recognizedItems.length === 0\" :style='{\"marginTop\":\"20px\"}'>\r\n        <div slot=\"header\">\r\n          <span :style='{\"fontSize\":\"18px\",\"fontWeight\":\"bold\"}'>üí° ‰ΩøÁî®ËØ¥Êòé</span>\r\n        </div>\r\n        <div :style='{\"lineHeight\":\"2\"}'>\r\n          <p><strong>1. ÊãçÊëÑÂ∞èÁ•®Ôºö</strong>Á°Æ‰øùÂ∞èÁ•®Âπ≥Êï¥„ÄÅÂÖâÁ∫øÂÖÖË∂≥„ÄÅÊñáÂ≠óÊ∏ÖÊô∞</p>\r\n          <p><strong>2. ‰∏ä‰º†ÂõæÁâáÔºö</strong>ÊîØÊåÅÊãñÊãΩÊàñÁÇπÂáª‰∏ä‰º†ÔºåÁ≥ªÁªü‰ºöËá™Âä®ËØÜÂà´</p>\r\n          <p><strong>3. Ê£ÄÊü•ÁªìÊûúÔºö</strong>ËØÜÂà´ÂêéËØ∑‰ªîÁªÜÊ†∏ÂØπÂïÜÂìÅÂêçÁß∞„ÄÅÊï∞ÈáèÁ≠â‰ø°ÊÅØ</p>\r\n          <p><strong>4. ‰øÆÊîπ‰ø°ÊÅØÔºö</strong>ÂèØ‰ª•Áõ¥Êé•Âú®Ë°®Ê†º‰∏≠‰øÆÊîπËØÜÂà´ÈîôËØØÁöÑÂÜÖÂÆπ</p>\r\n          <p><strong>5. ÊâπÈáèÊ∑ªÂä†Ôºö</strong>Á°ÆËÆ§Êó†ËØØÂêéÁÇπÂáª\"ÊâπÈáèÊ∑ªÂä†\"ÊåâÈíÆ</p>\r\n          <p :style='{\"color\":\"#E6A23C\",\"marginTop\":\"10px\"}'>\r\n            <i class=\"el-icon-warning\"></i> ÊèêÁ§∫ÔºöOCRËØÜÂà´ÂèØËÉΩÂ≠òÂú®ËØØÂ∑ÆÔºåËØ∑Âä°ÂøÖÊ£ÄÊü•ÂêéÂÜçÊ∑ªÂä†\r\n          </p>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      baseUrl: '',\r\n      uploadUrl: '',\r\n      uploading: false,\r\n      saving: false,\r\n      recognizedItems: [],\r\n      commonPurchaseDate: '',\r\n      commonStatus: 'new'\r\n    }\r\n  },\r\n  created() {\r\n    this.baseUrl = this.$config.baseUrl;\r\n    this.uploadUrl = this.baseUrl + '/ocr/recognizeReceipt';\r\n    this.commonPurchaseDate = this.formatDateTime(new Date());\r\n  },\r\n  methods: {\r\n    beforeUpload(file) {\r\n      const isImage = file.type.indexOf('image') !== -1;\r\n      const isLt5M = file.size / 1024 / 1024 < 5;\r\n      \r\n      if (!isImage) {\r\n        this.$message.error('Âè™ËÉΩ‰∏ä‰º†ÂõæÁâáÊñá‰ª∂ÔºÅ');\r\n        return false;\r\n      }\r\n      if (!isLt5M) {\r\n        this.$message.error('ÂõæÁâáÂ§ßÂ∞è‰∏çËÉΩË∂ÖËøá 5MBÔºÅ');\r\n        return false;\r\n      }\r\n      \r\n      this.uploading = true;\r\n      return true;\r\n    },\r\n    \r\n    handleUploadSuccess(response, file, fileList) {\r\n      this.uploading = false;\r\n      \r\n      if (response.code === 0) {\r\n        const items = response.items || [];\r\n        \r\n        if (items.length === 0) {\r\n          this.$message.warning('Êú™ËØÜÂà´Âà∞È£üÊùê‰ø°ÊÅØÔºåËØ∑Ê£ÄÊü•ÂõæÁâáÊòØÂê¶Ê∏ÖÊô∞');\r\n          return;\r\n        }\r\n        \r\n        this.recognizedItems = items.map(item => ({\r\n          shicaiName: item.name || '',\r\n          quantity: item.quantity || 1,\r\n          unit: item.unit || '‰∏™',\r\n          purchaseDate: this.commonPurchaseDate,\r\n          expiryDate: this.calculateExpiryDate(this.commonPurchaseDate, 7),\r\n          status: 'new'\r\n        }));\r\n        \r\n        this.$message.success(`ËØÜÂà´ÊàêÂäüÔºÅÂÖ±ËØÜÂà´Âà∞ ${items.length} È°πÈ£üÊùê`);\r\n      } else {\r\n        this.$message.error(response.msg || 'ËØÜÂà´Â§±Ë¥•');\r\n      }\r\n    },\r\n    \r\n    handleUploadError(err, file, fileList) {\r\n      this.uploading = false;\r\n      this.$message.error('‰∏ä‰º†Â§±Ë¥•Ôºö' + err.message);\r\n    },\r\n    \r\n    applyCommonSettings() {\r\n      this.recognizedItems.forEach(item => {\r\n        item.purchaseDate = this.commonPurchaseDate;\r\n        item.status = this.commonStatus;\r\n        item.expiryDate = this.calculateExpiryDate(this.commonPurchaseDate, 7);\r\n      });\r\n      this.$message.success('Â∑≤Â∫îÁî®Áªü‰∏ÄËÆæÁΩÆ');\r\n    },\r\n    \r\n    calculateExpiryDate(purchaseDate, days) {\r\n      if (!purchaseDate) return '';\r\n      let date = new Date(purchaseDate);\r\n      date.setDate(date.getDate() + days);\r\n      return this.formatDateTime(date);\r\n    },\r\n    \r\n    removeItem(index) {\r\n      this.recognizedItems.splice(index, 1);\r\n    },\r\n    \r\n    clearResults() {\r\n      this.$confirm('Á°ÆÂÆöÊ∏ÖÁ©∫ÊâÄÊúâËØÜÂà´ÁªìÊûúÂêóÔºü', 'ÊèêÁ§∫', {\r\n        confirmButtonText: 'Á°ÆÂÆö',\r\n        cancelButtonText: 'ÂèñÊ∂à',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.recognizedItems = [];\r\n      });\r\n    },\r\n    \r\n    batchAdd() {\r\n      for (let item of this.recognizedItems) {\r\n        if (!item.shicaiName) {\r\n          this.$message.error('ËØ∑Â°´ÂÜôÊâÄÊúâÈ£üÊùêÂêçÁß∞');\r\n          return;\r\n        }\r\n        if (!item.purchaseDate) {\r\n          this.$message.error('ËØ∑ÈÄâÊã©Ë¥≠‰π∞Êó•Êúü');\r\n          return;\r\n        }\r\n      }\r\n      \r\n      this.saving = true;\r\n      let userid = this.$storage.get('userid');\r\n      \r\n      let items = this.recognizedItems.map(item => ({\r\n        ...item,\r\n        userid: userid\r\n      }));\r\n      \r\n      this.$http.post('usershicai/batchSave', items).then(res => {\r\n        this.saving = false;\r\n        if (res.data && res.data.code === 0) {\r\n          this.$message.success('ÊâπÈáèÊ∑ªÂä†ÊàêÂäüÔºÅ');\r\n          this.$router.push('/index/usershicaiList');\r\n        } else {\r\n          this.$message.error(res.data.msg || 'Ê∑ªÂä†Â§±Ë¥•');\r\n        }\r\n      }).catch(() => {\r\n        this.saving = false;\r\n        this.$message.error('Ê∑ªÂä†Â§±Ë¥•');\r\n      });\r\n    },\r\n    \r\n    back() {\r\n      this.$router.go(-1);\r\n    },\r\n    \r\n    formatDateTime(date) {\r\n      let d = new Date(date);\r\n      return d.getFullYear() + '-' + \r\n             String(d.getMonth() + 1).padStart(2, '0') + '-' + \r\n             String(d.getDate()).padStart(2, '0') + ' ' +\r\n             String(d.getHours()).padStart(2, '0') + ':' +\r\n             String(d.getMinutes()).padStart(2, '0') + ':' +\r\n             String(d.getSeconds()).padStart(2, '0');\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.upload-area {\r\n  padding: 20px;\r\n}\r\n.upload-demo {\r\n  text-align: center;\r\n}\r\n.upload-demo >>> .el-upload {\r\n  width: 100%;\r\n}\r\n.upload-demo >>> .el-upload-dragger {\r\n  width: 100%;\r\n  height: 200px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.el-upload__text {\r\n  font-size: 14px;\r\n  color: #606266;\r\n  margin-top: 10px;\r\n}\r\n.el-upload__text em {\r\n  color: #409EFF;\r\n  font-style: normal;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}