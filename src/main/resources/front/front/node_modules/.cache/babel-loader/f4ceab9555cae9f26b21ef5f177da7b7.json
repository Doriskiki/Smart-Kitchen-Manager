{"remainingRequest":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\src\\pages\\statistics\\foodusage.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\src\\pages\\statistics\\foodusage.vue","mtime":1766837548723},{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\babel.config.js","mtime":1766811488312},{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766827789760},{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1766827793571},{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766827789760},{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1766827794095}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5tYXAuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHN0YXRzOiB7CiAgICAgICAgdG90YWxUeXBlczogMCwKICAgICAgICB0b3RhbFVzYWdlOiAwLAogICAgICAgIG1vc3RVc2VkOiAnLScsCiAgICAgICAgbW9zdFVzZWRDb3VudDogMCwKICAgICAgICBhdmdGcmVxdWVuY3k6IDAKICAgICAgfSwKICAgICAgdG9wRm9vZHM6IFtdLAogICAgICBmcmVxdWVuY3lEaXN0cmlidXRpb246IFtdLAogICAgICBzdWdnZXN0aW9uczogW10KICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5sb2FkU3RhdGlzdGljcygpOwogIH0sCiAgbWV0aG9kczogewogICAgbG9hZFN0YXRpc3RpY3MoKSB7CiAgICAgIGxldCB1c2VyaWQgPSB0aGlzLiRzdG9yYWdlLmdldCgndXNlcmlkJyk7CgogICAgICAvLyDojrflj5bnlKjmiLfnmoTpo5/mnZDkvb/nlKjmlbDmja4KICAgICAgdGhpcy4kaHR0cC5nZXQoJ3VzZXJzaGljYWkvbGlzdCcsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHBhZ2U6IDEsCiAgICAgICAgICBsaW1pdDogMTAwMCwKICAgICAgICAgIHVzZXJpZDogdXNlcmlkCiAgICAgICAgfQogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5kYXRhICYmIHJlcy5kYXRhLmNvZGUgPT09IDApIHsKICAgICAgICAgIHRoaXMucHJvY2Vzc1N0YXRpc3RpY3MocmVzLmRhdGEuZGF0YS5saXN0KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHByb2Nlc3NTdGF0aXN0aWNzKGRhdGEpIHsKICAgICAgaWYgKCFkYXRhIHx8IGRhdGEubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICAvLyDnu5/orqHmr4/np43po5/mnZDnmoTkvb/nlKjmg4XlhrUKICAgICAgbGV0IGZvb2RNYXAgPSB7fTsKICAgICAgZGF0YS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgIGxldCBuYW1lID0gaXRlbS5zaGljYWlOYW1lOwogICAgICAgIGlmICghZm9vZE1hcFtuYW1lXSkgewogICAgICAgICAgZm9vZE1hcFtuYW1lXSA9IHsKICAgICAgICAgICAgc2hpY2FpTmFtZTogbmFtZSwKICAgICAgICAgICAgdXNhZ2VDb3VudDogMCwKICAgICAgICAgICAgdG90YWxRdWFudGl0eTogMCwKICAgICAgICAgICAgdW5pdDogaXRlbS51bml0IHx8ICfkuKonLAogICAgICAgICAgICBsYXN0VXNlZERhdGU6IGl0ZW0ucHVyY2hhc2VEYXRlCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICBmb29kTWFwW25hbWVdLnVzYWdlQ291bnQrKzsKICAgICAgICBmb29kTWFwW25hbWVdLnRvdGFsUXVhbnRpdHkgKz0gcGFyc2VGbG9hdChpdGVtLnF1YW50aXR5IHx8IDApOwogICAgICAgIGlmIChpdGVtLnB1cmNoYXNlRGF0ZSA+IGZvb2RNYXBbbmFtZV0ubGFzdFVzZWREYXRlKSB7CiAgICAgICAgICBmb29kTWFwW25hbWVdLmxhc3RVc2VkRGF0ZSA9IGl0ZW0ucHVyY2hhc2VEYXRlOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICAvLyDovazmjaLkuLrmlbDnu4TlubbmjpLluo8KICAgICAgbGV0IGZvb2RMaXN0ID0gT2JqZWN0LnZhbHVlcyhmb29kTWFwKTsKICAgICAgZm9vZExpc3Quc29ydCgoYSwgYikgPT4gYi51c2FnZUNvdW50IC0gYS51c2FnZUNvdW50KTsKCiAgICAgIC8vIOiuoeeul+e7n+iuoeaVsOaNrgogICAgICB0aGlzLnN0YXRzLnRvdGFsVHlwZXMgPSBmb29kTGlzdC5sZW5ndGg7CiAgICAgIHRoaXMuc3RhdHMudG90YWxVc2FnZSA9IGRhdGEubGVuZ3RoOwogICAgICBpZiAoZm9vZExpc3QubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMuc3RhdHMubW9zdFVzZWQgPSBmb29kTGlzdFswXS5zaGljYWlOYW1lOwogICAgICAgIHRoaXMuc3RhdHMubW9zdFVzZWRDb3VudCA9IGZvb2RMaXN0WzBdLnVzYWdlQ291bnQ7CiAgICAgIH0KICAgICAgdGhpcy5zdGF0cy5hdmdGcmVxdWVuY3kgPSAoZGF0YS5sZW5ndGggLyA0KS50b0ZpeGVkKDEpOyAvLyDlgYforr7nu5/orqE05ZGo5pWw5o2uCgogICAgICAvLyBUT1AgMTAKICAgICAgbGV0IG1heENvdW50ID0gZm9vZExpc3RbMF0udXNhZ2VDb3VudDsKICAgICAgdGhpcy50b3BGb29kcyA9IGZvb2RMaXN0LnNsaWNlKDAsIDEwKS5tYXAoaXRlbSA9PiAoewogICAgICAgIC4uLml0ZW0sCiAgICAgICAgcGVyY2VudGFnZTogTWF0aC5yb3VuZChpdGVtLnVzYWdlQ291bnQgLyBtYXhDb3VudCAqIDEwMCkKICAgICAgfSkpOwoKICAgICAgLy8g6aKR546H5YiG5biDCiAgICAgIGxldCBoaWdoRnJlcSA9IGZvb2RMaXN0LmZpbHRlcihmID0+IGYudXNhZ2VDb3VudCA+PSAxMCkubGVuZ3RoOwogICAgICBsZXQgbm9ybWFsRnJlcSA9IGZvb2RMaXN0LmZpbHRlcihmID0+IGYudXNhZ2VDb3VudCA+PSA1ICYmIGYudXNhZ2VDb3VudCA8IDEwKS5sZW5ndGg7CiAgICAgIGxldCBsb3dGcmVxID0gZm9vZExpc3QuZmlsdGVyKGYgPT4gZi51c2FnZUNvdW50IDwgNSkubGVuZ3RoOwogICAgICBsZXQgdG90YWwgPSBmb29kTGlzdC5sZW5ndGg7CiAgICAgIHRoaXMuZnJlcXVlbmN5RGlzdHJpYnV0aW9uID0gW3sKICAgICAgICBsZXZlbDogJ2hpZ2gnLAogICAgICAgIGxhYmVsOiAn6auY6aKR6aOf5p2QICjiiaUxMOasoSknLAogICAgICAgIGNvdW50OiBoaWdoRnJlcSwKICAgICAgICBwZXJjZW50YWdlOiBNYXRoLnJvdW5kKGhpZ2hGcmVxIC8gdG90YWwgKiAxMDApLAogICAgICAgIGNvbG9yOiAnIzY3QzIzQScKICAgICAgfSwgewogICAgICAgIGxldmVsOiAnbm9ybWFsJywKICAgICAgICBsYWJlbDogJ+S4remikemjn+adkCAoNS055qyhKScsCiAgICAgICAgY291bnQ6IG5vcm1hbEZyZXEsCiAgICAgICAgcGVyY2VudGFnZTogTWF0aC5yb3VuZChub3JtYWxGcmVxIC8gdG90YWwgKiAxMDApLAogICAgICAgIGNvbG9yOiAnI0U2QTIzQycKICAgICAgfSwgewogICAgICAgIGxldmVsOiAnbG93JywKICAgICAgICBsYWJlbDogJ+S9jumikemjn+adkCAoPDXmrKEpJywKICAgICAgICBjb3VudDogbG93RnJlcSwKICAgICAgICBwZXJjZW50YWdlOiBNYXRoLnJvdW5kKGxvd0ZyZXEgLyB0b3RhbCAqIDEwMCksCiAgICAgICAgY29sb3I6ICcjOTA5Mzk5JwogICAgICB9XTsKCiAgICAgIC8vIOeUn+aIkOW7uuiurgogICAgICB0aGlzLmdlbmVyYXRlU3VnZ2VzdGlvbnMoZm9vZExpc3QpOwogICAgfSwKICAgIGdlbmVyYXRlU3VnZ2VzdGlvbnMoZm9vZExpc3QpIHsKICAgICAgdGhpcy5zdWdnZXN0aW9ucyA9IFtdOwogICAgICBpZiAoZm9vZExpc3QubGVuZ3RoID4gMCkgewogICAgICAgIGxldCB0b3AzID0gZm9vZExpc3Quc2xpY2UoMCwgMykubWFwKGYgPT4gZi5zaGljYWlOYW1lKS5qb2luKCfjgIEnKTsKICAgICAgICB0aGlzLnN1Z2dlc3Rpb25zLnB1c2goewogICAgICAgICAgdGl0bGU6ICfluLjnlKjpo5/mnZAnLAogICAgICAgICAgY29udGVudDogYOaCqOacgOW4uOS9v+eUqOeahOmjn+adkOaYr++8miR7dG9wM33vvIzlu7rorq7kv53mjIHpgILph4/lupPlrZjjgIJgLAogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgbGV0IGxvd0ZyZXFGb29kcyA9IGZvb2RMaXN0LmZpbHRlcihmID0+IGYudXNhZ2VDb3VudCA8IDMpOwogICAgICBpZiAobG93RnJlcUZvb2RzLmxlbmd0aCA+IDUpIHsKICAgICAgICB0aGlzLnN1Z2dlc3Rpb25zLnB1c2goewogICAgICAgICAgdGl0bGU6ICfpo5/mnZDlpJrmoLfmgKcnLAogICAgICAgICAgY29udGVudDogYOaCqOaciSAke2xvd0ZyZXFGb29kcy5sZW5ndGh9IOenjeS9jumikeS9v+eUqOeahOmjn+adkO+8jOW7uuiuruWinuWKoOi/meS6m+mjn+adkOeahOS9v+eUqOmikeeOh++8jOS/neaMgemlrumjn+Wkmuagt+aAp+OAgmAsCiAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICB9KTsKICAgICAgfQogICAgICB0aGlzLnN1Z2dlc3Rpb25zLnB1c2goewogICAgICAgIHRpdGxlOiAn5YGl5bq35o+Q56S6JywKICAgICAgICBjb250ZW50OiAn5bu66K6u5q+P5ZGo5pGE5YWl6Iez5bCRMjDnp43kuI3lkIznmoTpo5/mnZDvvIzkv53mjIHokKXlhbvlnYfooaHjgIInLAogICAgICAgIHR5cGU6ICdpbmZvJwogICAgICB9KTsKICAgIH0sCiAgICB0YWJsZVJvd0NsYXNzTmFtZSh7CiAgICAgIHJvdywKICAgICAgcm93SW5kZXgKICAgIH0pIHsKICAgICAgaWYgKHJvd0luZGV4ID09PSAwKSByZXR1cm4gJ3RvcC0xLXJvdyc7CiAgICAgIGlmIChyb3dJbmRleCA9PT0gMSkgcmV0dXJuICd0b3AtMi1yb3cnOwogICAgICBpZiAocm93SW5kZXggPT09IDIpIHJldHVybiAndG9wLTMtcm93JzsKICAgICAgcmV0dXJuICcnOwogICAgfSwKICAgIGdldFByb2dyZXNzQ29sb3IocGVyY2VudGFnZSkgewogICAgICBpZiAocGVyY2VudGFnZSA+PSA4MCkgcmV0dXJuICcjNjdDMjNBJzsKICAgICAgaWYgKHBlcmNlbnRhZ2UgPj0gNTApIHJldHVybiAnI0U2QTIzQyc7CiAgICAgIHJldHVybiAnIzkwOTM5OSc7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["data","stats","totalTypes","totalUsage","mostUsed","mostUsedCount","avgFrequency","topFoods","frequencyDistribution","suggestions","created","loadStatistics","methods","userid","$storage","get","$http","params","page","limit","then","res","code","processStatistics","list","length","foodMap","forEach","item","name","shicaiName","usageCount","totalQuantity","unit","lastUsedDate","purchaseDate","parseFloat","quantity","foodList","Object","values","sort","a","b","toFixed","maxCount","slice","map","percentage","Math","round","highFreq","filter","f","normalFreq","lowFreq","total","level","label","count","color","generateSuggestions","top3","join","push","title","content","type","lowFreqFoods","tableRowClassName","row","rowIndex","getProgressColor"],"sources":["src/pages/statistics/foodusage.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div :style='{\"padding\":\"12px\",\"margin\":\"10px auto\",\"borderColor\":\"#dbd9f4\",\"borderRadius\":\"8px\",\"background\":\"#fff\",\"borderWidth\":\"0 0 2px\",\"width\":\"1200px\",\"borderStyle\":\"solid\"}' class=\"breadcrumb-preview\">\r\n      <el-breadcrumb :separator=\"'Œû'\" :style='{\"width\":\"100%\",\"margin\":\"0 auto\",\"fontSize\":\"14px\",\"lineHeight\":\"1\",\"display\":\"flex\"}'>\r\n        <el-breadcrumb-item>È¶ñÈ°µ</el-breadcrumb-item>\r\n        <el-breadcrumb-item>ÁªüËÆ°ÂàÜÊûê</el-breadcrumb-item>\r\n        <el-breadcrumb-item>Â∏∏Áî®È£üÊùêÂàÜÊûê</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n    </div>\r\n    \r\n    <div class=\"statistics-preview\" :style='{\"width\":\"1200px\",\"margin\":\"10px auto\",\"position\":\"relative\",\"background\":\"none\"}'>\r\n      \r\n      <!-- ÁªüËÆ°Âç°Áâá -->\r\n      <el-row :gutter=\"20\" :style='{\"marginBottom\":\"20px\"}'>\r\n        <el-col :span=\"6\">\r\n          <el-card shadow=\"hover\" :style='{\"background\":\"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\"color\":\"#fff\"}'>\r\n            <div :style='{\"fontSize\":\"14px\",\"marginBottom\":\"10px\"}'>È£üÊùêÁßçÁ±ª</div>\r\n            <div :style='{\"fontSize\":\"32px\",\"fontWeight\":\"bold\"}'>{{stats.totalTypes}}</div>\r\n            <div :style='{\"fontSize\":\"12px\",\"marginTop\":\"5px\",\"opacity\":\"0.8\"}'>Áßç</div>\r\n          </el-card>\r\n        </el-col>\r\n        <el-col :span=\"6\">\r\n          <el-card shadow=\"hover\" :style='{\"background\":\"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)\",\"color\":\"#fff\"}'>\r\n            <div :style='{\"fontSize\":\"14px\",\"marginBottom\":\"10px\"}'>ÊÄª‰ΩøÁî®Ê¨°Êï∞</div>\r\n            <div :style='{\"fontSize\":\"32px\",\"fontWeight\":\"bold\"}'>{{stats.totalUsage}}</div>\r\n            <div :style='{\"fontSize\":\"12px\",\"marginTop\":\"5px\",\"opacity\":\"0.8\"}'>Ê¨°</div>\r\n          </el-card>\r\n        </el-col>\r\n        <el-col :span=\"6\">\r\n          <el-card shadow=\"hover\" :style='{\"background\":\"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)\",\"color\":\"#fff\"}'>\r\n            <div :style='{\"fontSize\":\"14px\",\"marginBottom\":\"10px\"}'>ÊúÄÂ∏∏Áî®È£üÊùê</div>\r\n            <div :style='{\"fontSize\":\"24px\",\"fontWeight\":\"bold\"}'>{{stats.mostUsed}}</div>\r\n            <div :style='{\"fontSize\":\"12px\",\"marginTop\":\"5px\",\"opacity\":\"0.8\"}'>{{stats.mostUsedCount}}Ê¨°</div>\r\n          </el-card>\r\n        </el-col>\r\n        <el-col :span=\"6\">\r\n          <el-card shadow=\"hover\" :style='{\"background\":\"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)\",\"color\":\"#fff\"}'>\r\n            <div :style='{\"fontSize\":\"14px\",\"marginBottom\":\"10px\"}'>Âπ≥Âùá‰ΩøÁî®È¢ëÁéá</div>\r\n            <div :style='{\"fontSize\":\"32px\",\"fontWeight\":\"bold\"}'>{{stats.avgFrequency}}</div>\r\n            <div :style='{\"fontSize\":\"12px\",\"marginTop\":\"5px\",\"opacity\":\"0.8\"}'>Ê¨°/Âë®</div>\r\n          </el-card>\r\n        </el-col>\r\n      </el-row>\r\n      \r\n      <!-- È£üÊùê‰ΩøÁî®ÊéíË°å -->\r\n      <el-card :style='{\"marginBottom\":\"20px\"}'>\r\n        <div slot=\"header\">\r\n          <span :style='{\"fontSize\":\"18px\",\"fontWeight\":\"bold\"}'>üìä È£üÊùê‰ΩøÁî®ÊéíË°åÊ¶ú TOP 10</span>\r\n        </div>\r\n        \r\n        <el-table :data=\"topFoods\" :style='{\"width\":\"100%\"}' :row-class-name=\"tableRowClassName\">\r\n          <el-table-column type=\"index\" label=\"ÊéíÂêç\" width=\"80\" align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n              <el-tag v-if=\"scope.$index === 0\" type=\"danger\" size=\"small\">ü•á</el-tag>\r\n              <el-tag v-else-if=\"scope.$index === 1\" type=\"warning\" size=\"small\">ü•à</el-tag>\r\n              <el-tag v-else-if=\"scope.$index === 2\" type=\"success\" size=\"small\">ü•â</el-tag>\r\n              <span v-else>{{scope.$index + 1}}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"shicaiName\" label=\"È£üÊùêÂêçÁß∞\" width=\"200\"></el-table-column>\r\n          <el-table-column prop=\"usageCount\" label=\"‰ΩøÁî®Ê¨°Êï∞\" width=\"120\" align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n              <el-tag type=\"primary\">{{scope.row.usageCount}} Ê¨°</el-tag>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"totalQuantity\" label=\"ÊÄª‰ΩøÁî®Èáè\" width=\"150\" align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n              {{scope.row.totalQuantity}} {{scope.row.unit}}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"lastUsedDate\" label=\"ÊúÄÂêé‰ΩøÁî®\" width=\"180\"></el-table-column>\r\n          <el-table-column label=\"‰ΩøÁî®È¢ëÁéá\" align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n              <el-progress :percentage=\"scope.row.percentage\" :color=\"getProgressColor(scope.row.percentage)\"></el-progress>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-card>\r\n      \r\n      <!-- È£üÊùêÂàÜÁ±ªÁªüËÆ° -->\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"12\">\r\n          <el-card>\r\n            <div slot=\"header\">\r\n              <span :style='{\"fontSize\":\"18px\",\"fontWeight\":\"bold\"}'>ü•ó È£üÊùê‰ΩøÁî®È¢ëÁéáÂàÜÂ∏É</span>\r\n            </div>\r\n            <div :style='{\"padding\":\"20px\"}'>\r\n              <div v-for=\"item in frequencyDistribution\" :key=\"item.level\" :style='{\"marginBottom\":\"15px\"}'>\r\n                <div :style='{\"display\":\"flex\",\"justifyContent\":\"space-between\",\"marginBottom\":\"5px\"}'>\r\n                  <span>{{item.label}}</span>\r\n                  <span>{{item.count}} Áßç ({{item.percentage}}%)</span>\r\n                </div>\r\n                <el-progress :percentage=\"item.percentage\" :color=\"item.color\" :show-text=\"false\"></el-progress>\r\n              </div>\r\n            </div>\r\n          </el-card>\r\n        </el-col>\r\n        \r\n        <el-col :span=\"12\">\r\n          <el-card>\r\n            <div slot=\"header\">\r\n              <span :style='{\"fontSize\":\"18px\",\"fontWeight\":\"bold\"}'>üí° ‰ΩøÁî®Âª∫ËÆÆ</span>\r\n            </div>\r\n            <div :style='{\"padding\":\"20px\",\"lineHeight\":\"2\"}'>\r\n              <el-alert v-for=\"(tip, index) in suggestions\" :key=\"index\" :title=\"tip.title\" :type=\"tip.type\" :closable=\"false\" :style='{\"marginBottom\":\"10px\"}'>\r\n                <div>{{tip.content}}</div>\r\n              </el-alert>\r\n            </div>\r\n          </el-card>\r\n        </el-col>\r\n      </el-row>\r\n      \r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      stats: {\r\n        totalTypes: 0,\r\n        totalUsage: 0,\r\n        mostUsed: '-',\r\n        mostUsedCount: 0,\r\n        avgFrequency: 0\r\n      },\r\n      topFoods: [],\r\n      frequencyDistribution: [],\r\n      suggestions: []\r\n    }\r\n  },\r\n  created() {\r\n    this.loadStatistics();\r\n  },\r\n  methods: {\r\n    loadStatistics() {\r\n      let userid = this.$storage.get('userid');\r\n      \r\n      // Ëé∑ÂèñÁî®Êà∑ÁöÑÈ£üÊùê‰ΩøÁî®Êï∞ÊçÆ\r\n      this.$http.get('usershicai/list', {\r\n        params: {\r\n          page: 1,\r\n          limit: 1000,\r\n          userid: userid\r\n        }\r\n      }).then(res => {\r\n        if (res.data && res.data.code === 0) {\r\n          this.processStatistics(res.data.data.list);\r\n        }\r\n      });\r\n    },\r\n    \r\n    processStatistics(data) {\r\n      if (!data || data.length === 0) {\r\n        return;\r\n      }\r\n      \r\n      // ÁªüËÆ°ÊØèÁßçÈ£üÊùêÁöÑ‰ΩøÁî®ÊÉÖÂÜµ\r\n      let foodMap = {};\r\n      data.forEach(item => {\r\n        let name = item.shicaiName;\r\n        if (!foodMap[name]) {\r\n          foodMap[name] = {\r\n            shicaiName: name,\r\n            usageCount: 0,\r\n            totalQuantity: 0,\r\n            unit: item.unit || '‰∏™',\r\n            lastUsedDate: item.purchaseDate\r\n          };\r\n        }\r\n        foodMap[name].usageCount++;\r\n        foodMap[name].totalQuantity += parseFloat(item.quantity || 0);\r\n        if (item.purchaseDate > foodMap[name].lastUsedDate) {\r\n          foodMap[name].lastUsedDate = item.purchaseDate;\r\n        }\r\n      });\r\n      \r\n      // ËΩ¨Êç¢‰∏∫Êï∞ÁªÑÂπ∂ÊéíÂ∫è\r\n      let foodList = Object.values(foodMap);\r\n      foodList.sort((a, b) => b.usageCount - a.usageCount);\r\n      \r\n      // ËÆ°ÁÆóÁªüËÆ°Êï∞ÊçÆ\r\n      this.stats.totalTypes = foodList.length;\r\n      this.stats.totalUsage = data.length;\r\n      if (foodList.length > 0) {\r\n        this.stats.mostUsed = foodList[0].shicaiName;\r\n        this.stats.mostUsedCount = foodList[0].usageCount;\r\n      }\r\n      this.stats.avgFrequency = (data.length / 4).toFixed(1); // ÂÅáËÆæÁªüËÆ°4Âë®Êï∞ÊçÆ\r\n      \r\n      // TOP 10\r\n      let maxCount = foodList[0].usageCount;\r\n      this.topFoods = foodList.slice(0, 10).map(item => ({\r\n        ...item,\r\n        percentage: Math.round((item.usageCount / maxCount) * 100)\r\n      }));\r\n      \r\n      // È¢ëÁéáÂàÜÂ∏É\r\n      let highFreq = foodList.filter(f => f.usageCount >= 10).length;\r\n      let normalFreq = foodList.filter(f => f.usageCount >= 5 && f.usageCount < 10).length;\r\n      let lowFreq = foodList.filter(f => f.usageCount < 5).length;\r\n      let total = foodList.length;\r\n      \r\n      this.frequencyDistribution = [\r\n        {\r\n          level: 'high',\r\n          label: 'È´òÈ¢ëÈ£üÊùê (‚â•10Ê¨°)',\r\n          count: highFreq,\r\n          percentage: Math.round((highFreq / total) * 100),\r\n          color: '#67C23A'\r\n        },\r\n        {\r\n          level: 'normal',\r\n          label: '‰∏≠È¢ëÈ£üÊùê (5-9Ê¨°)',\r\n          count: normalFreq,\r\n          percentage: Math.round((normalFreq / total) * 100),\r\n          color: '#E6A23C'\r\n        },\r\n        {\r\n          level: 'low',\r\n          label: '‰ΩéÈ¢ëÈ£üÊùê (<5Ê¨°)',\r\n          count: lowFreq,\r\n          percentage: Math.round((lowFreq / total) * 100),\r\n          color: '#909399'\r\n        }\r\n      ];\r\n      \r\n      // ÁîüÊàêÂª∫ËÆÆ\r\n      this.generateSuggestions(foodList);\r\n    },\r\n    \r\n    generateSuggestions(foodList) {\r\n      this.suggestions = [];\r\n      \r\n      if (foodList.length > 0) {\r\n        let top3 = foodList.slice(0, 3).map(f => f.shicaiName).join('„ÄÅ');\r\n        this.suggestions.push({\r\n          title: 'Â∏∏Áî®È£üÊùê',\r\n          content: `ÊÇ®ÊúÄÂ∏∏‰ΩøÁî®ÁöÑÈ£üÊùêÊòØÔºö${top3}ÔºåÂª∫ËÆÆ‰øùÊåÅÈÄÇÈáèÂ∫ìÂ≠ò„ÄÇ`,\r\n          type: 'success'\r\n        });\r\n      }\r\n      \r\n      let lowFreqFoods = foodList.filter(f => f.usageCount < 3);\r\n      if (lowFreqFoods.length > 5) {\r\n        this.suggestions.push({\r\n          title: 'È£üÊùêÂ§öÊ†∑ÊÄß',\r\n          content: `ÊÇ®Êúâ ${lowFreqFoods.length} Áßç‰ΩéÈ¢ë‰ΩøÁî®ÁöÑÈ£üÊùêÔºåÂª∫ËÆÆÂ¢ûÂä†Ëøô‰∫õÈ£üÊùêÁöÑ‰ΩøÁî®È¢ëÁéáÔºå‰øùÊåÅÈ•ÆÈ£üÂ§öÊ†∑ÊÄß„ÄÇ`,\r\n          type: 'warning'\r\n        });\r\n      }\r\n      \r\n      this.suggestions.push({\r\n        title: 'ÂÅ•Â∫∑ÊèêÁ§∫',\r\n        content: 'Âª∫ËÆÆÊØèÂë®ÊëÑÂÖ•Ëá≥Â∞ë20Áßç‰∏çÂêåÁöÑÈ£üÊùêÔºå‰øùÊåÅËê•ÂÖªÂùáË°°„ÄÇ',\r\n        type: 'info'\r\n      });\r\n    },\r\n    \r\n    tableRowClassName({row, rowIndex}) {\r\n      if (rowIndex === 0) return 'top-1-row';\r\n      if (rowIndex === 1) return 'top-2-row';\r\n      if (rowIndex === 2) return 'top-3-row';\r\n      return '';\r\n    },\r\n    \r\n    getProgressColor(percentage) {\r\n      if (percentage >= 80) return '#67C23A';\r\n      if (percentage >= 50) return '#E6A23C';\r\n      return '#909399';\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.el-table >>> .top-1-row {\r\n  background: #fef0f0;\r\n}\r\n.el-table >>> .top-2-row {\r\n  background: #fdf6ec;\r\n}\r\n.el-table >>> .top-3-row {\r\n  background: #f0f9ff;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}