{"remainingRequest":"D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\src\\pages\\usershicai\\list.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\src\\pages\\usershicai\\list.vue","mtime":1766835189378},{"path":"D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\babel.config.js","mtime":1766811488312},{"path":"D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766827789760},{"path":"D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1766827793571},{"path":"D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766827789760},{"path":"D:\\桌面\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1766827794095}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmlsdGVyLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBiYXNlVXJsOiAnJywKICAgICAgZGF0YUxpc3Q6IFtdLAogICAgICBmb3JtU2VhcmNoOiB7CiAgICAgICAgc2hpY2FpTmFtZTogJycKICAgICAgfSwKICAgICAgc3RhdHVzRmlsdGVyOiAnJywKICAgICAgcGFnZVNpemU6IDEwLAogICAgICB0b3RhbDogMCwKICAgICAgdG90YWxDb3VudDogMCwKICAgICAgZXhwaXJpbmdTb29uQ291bnQ6IDAsCiAgICAgIG5ld0NvdW50OiAwCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuYmFzZVVybCA9IHRoaXMuJGNvbmZpZy5iYXNlVXJsOwogICAgdGhpcy5nZXRTdGF0cygpOwogICAgdGhpcy5nZXRMaXN0KDEpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W57uf6K6h5pWw5o2uCiAgICBnZXRTdGF0cygpIHsKICAgICAgbGV0IHVzZXJpZCA9IHRoaXMuJHN0b3JhZ2UuZ2V0KCd1c2VyaWQnKTsKICAgICAgdGhpcy4kaHR0cC5nZXQoYHVzZXJzaGljYWkvbGlzdEJ5VXNlcj91c2VyaWQ9JHt1c2VyaWR9YCkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuZGF0YSAmJiByZXMuZGF0YS5jb2RlID09PSAwKSB7CiAgICAgICAgICBsZXQgbGlzdCA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICB0aGlzLnRvdGFsQ291bnQgPSBsaXN0Lmxlbmd0aDsKICAgICAgICAgIHRoaXMubmV3Q291bnQgPSBsaXN0LmZpbHRlcihpdGVtID0+IGl0ZW0uc3RhdHVzID09PSAnbmV3JykubGVuZ3RoOwogICAgICAgICAgdGhpcy5leHBpcmluZ1Nvb25Db3VudCA9IGxpc3QuZmlsdGVyKGl0ZW0gPT4gdGhpcy5pc0V4cGlyaW5nU29vbihpdGVtLmV4cGlyeURhdGUpKS5sZW5ndGg7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDojrflj5bliJfooagKICAgIGdldExpc3QocGFnZSkgewogICAgICBsZXQgdXNlcmlkID0gdGhpcy4kc3RvcmFnZS5nZXQoJ3VzZXJpZCcpOwogICAgICBsZXQgcGFyYW1zID0gewogICAgICAgIHBhZ2U6IHBhZ2UgfHwgMSwKICAgICAgICBsaW1pdDogdGhpcy5wYWdlU2l6ZSwKICAgICAgICB1c2VyaWQ6IHVzZXJpZAogICAgICB9OwogICAgICBpZiAodGhpcy5mb3JtU2VhcmNoLnNoaWNhaU5hbWUpIHsKICAgICAgICBwYXJhbXMuc2hpY2FpTmFtZSA9IHRoaXMuZm9ybVNlYXJjaC5zaGljYWlOYW1lOwogICAgICB9CiAgICAgIGlmICh0aGlzLnN0YXR1c0ZpbHRlciAmJiB0aGlzLnN0YXR1c0ZpbHRlciAhPT0gJ2V4cGlyaW5nJykgewogICAgICAgIHBhcmFtcy5zdGF0dXMgPSB0aGlzLnN0YXR1c0ZpbHRlcjsKICAgICAgfQogICAgICBpZiAodGhpcy5zdGF0dXNGaWx0ZXIgPT09ICdleHBpcmluZycpIHsKICAgICAgICAvLyDmn6Xor6LljbPlsIbov4fmnJ/nmoTpo5/mnZAKICAgICAgICB0aGlzLiRodHRwLmdldChgdXNlcnNoaWNhaS9saXN0RXhwaXJpbmdTb29uP3VzZXJpZD0ke3VzZXJpZH1gKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzLmRhdGEgJiYgcmVzLmRhdGEuY29kZSA9PT0gMCkgewogICAgICAgICAgICB0aGlzLmRhdGFMaXN0ID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgICAgdGhpcy50b3RhbCA9IHRoaXMuZGF0YUxpc3QubGVuZ3RoOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJGh0dHAuZ2V0KCd1c2Vyc2hpY2FpL3BhZ2UnLCB7CiAgICAgICAgICBwYXJhbXMKICAgICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzLmRhdGEgJiYgcmVzLmRhdGEuY29kZSA9PT0gMCkgewogICAgICAgICAgICB0aGlzLmRhdGFMaXN0ID0gcmVzLmRhdGEuZGF0YS5saXN0OwogICAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLmRhdGEuZGF0YS50b3RhbDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8vIOaMieeKtuaAgeetm+mAiQogICAgZmlsdGVyQnlTdGF0dXMoc3RhdHVzKSB7CiAgICAgIHRoaXMuc3RhdHVzRmlsdGVyID0gc3RhdHVzOwogICAgICB0aGlzLmdldExpc3QoMSk7CiAgICB9LAogICAgLy8g5qC85byP5YyW5pel5pyfCiAgICBmb3JtYXREYXRlKGRhdGUpIHsKICAgICAgaWYgKCFkYXRlKSByZXR1cm4gJyc7CiAgICAgIGxldCBkID0gbmV3IERhdGUoZGF0ZSk7CiAgICAgIHJldHVybiBkLmdldEZ1bGxZZWFyKCkgKyAnLScgKyBTdHJpbmcoZC5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKSArICctJyArIFN0cmluZyhkLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTsKICAgIH0sCiAgICAvLyDliKTmlq3mmK/lkKbljbPlsIbov4fmnJ8KICAgIGlzRXhwaXJpbmdTb29uKGV4cGlyeURhdGUpIHsKICAgICAgaWYgKCFleHBpcnlEYXRlKSByZXR1cm4gZmFsc2U7CiAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpOwogICAgICBsZXQgZXhwaXJ5ID0gbmV3IERhdGUoZXhwaXJ5RGF0ZSk7CiAgICAgIGxldCBkaWZmID0gZXhwaXJ5IC0gbm93OwogICAgICBsZXQgZGF5cyA9IGRpZmYgLyAoMTAwMCAqIDYwICogNjAgKiAyNCk7CiAgICAgIHJldHVybiBkYXlzID4gMCAmJiBkYXlzIDw9IDc7CiAgICB9LAogICAgLy8g6I635Y+W6L+H5pyf5pel5pyf5qC35byPCiAgICBnZXRFeHBpcnlTdHlsZShleHBpcnlEYXRlKSB7CiAgICAgIGlmICh0aGlzLmlzRXhwaXJpbmdTb29uKGV4cGlyeURhdGUpKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICdjb2xvcic6ICcjZjU2YzZjJywKICAgICAgICAgICdmb250V2VpZ2h0JzogJ2JvbGQnCiAgICAgICAgfTsKICAgICAgfQogICAgICByZXR1cm4ge307CiAgICB9LAogICAgLy8g6I635Y+W54q25oCB57G75Z6LCiAgICBnZXRTdGF0dXNUeXBlKHN0YXR1cykgewogICAgICBjb25zdCB0eXBlcyA9IHsKICAgICAgICAnbmV3JzogJ3N1Y2Nlc3MnLAogICAgICAgICd1c2VkJzogJ2luZm8nLAogICAgICAgICdleHBpcmVkJzogJ2RhbmdlcicsCiAgICAgICAgJ2Rpc2NhcmRlZCc6ICd3YXJuaW5nJwogICAgICB9OwogICAgICByZXR1cm4gdHlwZXNbc3RhdHVzXSB8fCAnJzsKICAgIH0sCiAgICAvLyDojrflj5bnirbmgIHmlofmnKwKICAgIGdldFN0YXR1c1RleHQoc3RhdHVzKSB7CiAgICAgIGNvbnN0IHRleHRzID0gewogICAgICAgICduZXcnOiAn5paw6bKcJywKICAgICAgICAndXNlZCc6ICflt7Lkvb/nlKgnLAogICAgICAgICdleHBpcmVkJzogJ+W3sui/h+acnycsCiAgICAgICAgJ2Rpc2NhcmRlZCc6ICflt7LkuKLlvIMnCiAgICAgIH07CiAgICAgIHJldHVybiB0ZXh0c1tzdGF0dXNdIHx8IHN0YXR1czsKICAgIH0sCiAgICAvLyDmoIforrDkuLrlt7Lkvb/nlKgKICAgIG1hcmtBc1VzZWQocm93KSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+ehruWumuagh+iusOS4uuW3suS9v+eUqOWQlz8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy4kaHR0cC5wb3N0KCd1c2Vyc2hpY2FpL3VwZGF0ZScsIHsKICAgICAgICAgIGlkOiByb3cuaWQsCiAgICAgICAgICBzdGF0dXM6ICd1c2VkJwogICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuZGF0YSAmJiByZXMuZGF0YS5jb2RlID09PSAwKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5pON5L2c5oiQ5YqfJyk7CiAgICAgICAgICAgIHRoaXMuZ2V0U3RhdHMoKTsKICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWIoOmZpAogICAgZGVsKGlkKSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+ehruWumuWIoOmZpOWQlz8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy4kaHR0cC5wb3N0KCd1c2Vyc2hpY2FpL2RlbGV0ZScsIFtpZF0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuZGF0YSAmJiByZXMuZGF0YS5jb2RlID09PSAwKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJyk7CiAgICAgICAgICAgIHRoaXMuZ2V0U3RhdHMoKTsKICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOa3u+WKoAogICAgYWRkKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2luZGV4L3VzZXJzaGljYWlBZGQnKTsKICAgIH0sCiAgICAvLyDlsI/npajor4bliKsKICAgIHJlY2VpcHRTY2FuKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2luZGV4L3VzZXJzaGljYWlSZWNlaXB0Jyk7CiAgICB9LAogICAgLy8g57yW6L6RCiAgICBlZGl0KHJvdykgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogJy9pbmRleC91c2Vyc2hpY2FpQWRkJywKICAgICAgICBxdWVyeTogewogICAgICAgICAgaWQ6IHJvdy5pZAogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g6K+m5oOFCiAgICB0b0RldGFpbChyb3cpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvaW5kZXgvdXNlcnNoaWNhaURldGFpbCcsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIGlkOiByb3cuaWQKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWIhumhtQogICAgY3VyQ2hhbmdlKHBhZ2UpIHsKICAgICAgdGhpcy5nZXRMaXN0KHBhZ2UpOwogICAgfSwKICAgIHNpemVDaGFuZ2Uoc2l6ZSkgewogICAgICB0aGlzLnBhZ2VTaXplID0gc2l6ZTsKICAgICAgdGhpcy5nZXRMaXN0KDEpOwogICAgfQogIH0KfTs="},{"version":3,"names":["data","baseUrl","dataList","formSearch","shicaiName","statusFilter","pageSize","total","totalCount","expiringSoonCount","newCount","created","$config","getStats","getList","methods","userid","$storage","get","$http","then","res","code","list","length","filter","item","status","isExpiringSoon","expiryDate","page","params","limit","filterByStatus","formatDate","date","d","Date","getFullYear","String","getMonth","padStart","getDate","now","expiry","diff","days","getExpiryStyle","getStatusType","types","getStatusText","texts","markAsUsed","row","$confirm","confirmButtonText","cancelButtonText","type","post","id","$message","success","del","add","$router","push","receiptScan","edit","path","query","toDetail","curChange","sizeChange","size"],"sources":["src/pages/usershicai/list.vue"],"sourcesContent":["<template>\r\n<div>\r\n\t<div :style='{\"padding\":\"12px\",\"margin\":\"10px auto\",\"borderColor\":\"#dbd9f4\",\"borderRadius\":\"8px\",\"background\":\"#fff\",\"borderWidth\":\"0 0 2px\",\"width\":\"1200px\",\"borderStyle\":\"solid\"}' class=\"breadcrumb-preview\">\r\n\t\t<el-breadcrumb :separator=\"'Ξ'\" :style='{\"width\":\"100%\",\"margin\":\"0 auto\",\"fontSize\":\"14px\",\"lineHeight\":\"1\",\"display\":\"flex\"}'>\r\n\t\t\t<el-breadcrumb-item>首页</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>我的食材库</el-breadcrumb-item>\r\n\t\t</el-breadcrumb>\r\n\t</div>\r\n\t\r\n\t<div class=\"list-preview\" :style='{\"width\":\"1200px\",\"margin\":\"10px auto\",\"position\":\"relative\",\"background\":\"none\"}'>\r\n\t\t<!-- 统计卡片 -->\r\n\t\t<div class=\"stats-cards\" :style='{\"display\":\"flex\",\"justifyContent\":\"space-between\",\"marginBottom\":\"20px\"}'>\r\n\t\t\t<div class=\"stat-card\" :style='{\"flex\":\"1\",\"padding\":\"20px\",\"margin\":\"0 10px\",\"borderRadius\":\"8px\",\"background\":\"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\"color\":\"#fff\",\"textAlign\":\"center\"}'>\r\n\t\t\t\t<div :style='{\"fontSize\":\"32px\",\"fontWeight\":\"bold\"}'>{{totalCount}}</div>\r\n\t\t\t\t<div :style='{\"fontSize\":\"14px\",\"marginTop\":\"8px\"}'>食材总数</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"stat-card\" :style='{\"flex\":\"1\",\"padding\":\"20px\",\"margin\":\"0 10px\",\"borderRadius\":\"8px\",\"background\":\"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)\",\"color\":\"#fff\",\"textAlign\":\"center\"}'>\r\n\t\t\t\t<div :style='{\"fontSize\":\"32px\",\"fontWeight\":\"bold\"}'>{{expiringSoonCount}}</div>\r\n\t\t\t\t<div :style='{\"fontSize\":\"14px\",\"marginTop\":\"8px\"}'>即将过期</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"stat-card\" :style='{\"flex\":\"1\",\"padding\":\"20px\",\"margin\":\"0 10px\",\"borderRadius\":\"8px\",\"background\":\"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)\",\"color\":\"#fff\",\"textAlign\":\"center\"}'>\r\n\t\t\t\t<div :style='{\"fontSize\":\"32px\",\"fontWeight\":\"bold\"}'>{{newCount}}</div>\r\n\t\t\t\t<div :style='{\"fontSize\":\"14px\",\"marginTop\":\"8px\"}'>新鲜食材</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 状态筛选 -->\r\n\t\t<div class=\"category-1\" :style='{\"padding\":\"10px\",\"borderColor\":\"#dbd9f4\",\"borderRadius\":\"8px\",\"background\":\"#fff\",\"borderWidth\":\"2px 1px 1px 1px\",\"display\":\"flex\",\"width\":\"100%\",\"borderStyle\":\"solid\",\"height\":\"auto\"}'>\r\n\t\t\t<div class=\"item\" :class=\"statusFilter == '' ? 'active' : ''\" @click=\"filterByStatus('')\">全部</div>\r\n\t\t\t<div class=\"item\" :class=\"statusFilter == 'new' ? 'active' : ''\" @click=\"filterByStatus('new')\">新鲜</div>\r\n\t\t\t<div class=\"item\" :class=\"statusFilter == 'used' ? 'active' : ''\" @click=\"filterByStatus('used')\">已使用</div>\r\n\t\t\t<div class=\"item\" :class=\"statusFilter == 'expired' ? 'active' : ''\" @click=\"filterByStatus('expired')\">已过期</div>\r\n\t\t\t<div class=\"item\" :class=\"statusFilter == 'expiring' ? 'active' : ''\" @click=\"filterByStatus('expiring')\">⚠️ 即将过期</div>\r\n\t\t</div>\r\n\t\t\r\n\t\t<!-- 搜索表单 -->\r\n\t\t<el-form :inline=\"true\" :model=\"formSearch\" class=\"list-form-pv\" :style='{\"border\":\"2px solid #dbd9f4\",\"padding\":\"10px\",\"margin\":\"10px 0 0 0\",\"alignItems\":\"center\",\"borderRadius\":\"8px\",\"flexWrap\":\"wrap\",\"background\":\"#f8f8fc\",\"display\":\"flex\",\"width\":\"100%\",\"height\":\"auto\"}'>\r\n\t\t\t<el-form-item :style='{\"margin\":\"10px\"}'>\r\n\t\t\t\t<div class=\"lable\" v-if=\"true\" :style='{\"width\":\"auto\",\"padding\":\"0 10px\",\"lineHeight\":\"42px\",\"display\":\"inline-block\"}'>食材名称</div>\r\n\t\t\t\t<el-input v-model=\"formSearch.shicaiName\" placeholder=\"食材名称\" clearable></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-button :style='{\"cursor\":\"pointer\",\"border\":\"0\",\"padding\":\"0px 15px\",\"margin\":\"0 10px 0 0\",\"outline\":\"none\",\"color\":\"#666\",\"borderRadius\":\"6px\",\"background\":\"linear-gradient(90deg, rgba(255,233,100,1) 0%, rgba(194,248,126,1) 29%, rgba(181,233,252,1) 61%, rgba(246,172,218,1) 100%)\",\"width\":\"auto\",\"fontSize\":\"14px\",\"lineHeight\":\"42px\",\"height\":\"42px\"}' type=\"primary\" @click=\"getList(1)\"><i :style='{\"color\":\"#666\",\"margin\":\"0 10px 0 0\",\"fontSize\":\"14px\"}' class=\"el-icon-search\"></i>查询</el-button>\r\n\t\t\t<el-button :style='{\"cursor\":\"pointer\",\"border\":\"0\",\"padding\":\"0px 15px\",\"margin\":\"0 10px 0 0\",\"outline\":\"none\",\"color\":\"#666\",\"borderRadius\":\"6px\",\"background\":\"linear-gradient(90deg, rgba(255,233,100,1) 0%, rgba(194,248,126,1) 29%, rgba(181,233,252,1) 61%, rgba(246,172,218,1) 100%)\",\"width\":\"auto\",\"fontSize\":\"14px\",\"lineHeight\":\"42px\",\"height\":\"42px\"}' type=\"primary\" @click=\"add()\"><i :style='{\"color\":\"#666\",\"margin\":\"0 10px 0 0\",\"fontSize\":\"14px\"}' class=\"el-icon-circle-plus-outline\"></i>添加食材</el-button>\r\n\t\t\t<el-button :style='{\"cursor\":\"pointer\",\"border\":\"0\",\"padding\":\"0px 15px\",\"margin\":\"0 10px 0 0\",\"outline\":\"none\",\"color\":\"#666\",\"borderRadius\":\"6px\",\"background\":\"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\"width\":\"auto\",\"fontSize\":\"14px\",\"lineHeight\":\"42px\",\"height\":\"42px\",\"color\":\"#fff\"}' type=\"primary\" @click=\"receiptScan()\"><i :style='{\"color\":\"#fff\",\"margin\":\"0 10px 0 0\",\"fontSize\":\"14px\"}' class=\"el-icon-camera\"></i>小票识别</el-button>\r\n\t\t</el-form>\r\n\r\n\t\t<!-- 食材列表 -->\r\n\t\t<div class=\"list\" :style='{\"border\":\"2px solid #dbd9f4\",\"margin\":\"20px 0 0 0\",\"borderRadius\":\"8px\",\"background\":\"#fff\"}'>\r\n\t\t\t<el-table :data=\"dataList\" style=\"width: 100%\" :header-cell-style=\"{'background':'#f8f8fc','color':'#333'}\">\r\n\t\t\t\t<el-table-column prop=\"shicaiName\" label=\"食材名称\" width=\"180\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<span :style='{\"fontSize\":\"16px\",\"fontWeight\":\"bold\"}'>{{scope.row.shicaiName}}</span>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"quantity\" label=\"数量\" width=\"120\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t{{scope.row.quantity}} {{scope.row.unit}}\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"purchaseDate\" label=\"购买日期\" width=\"180\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t{{formatDate(scope.row.purchaseDate)}}\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"expiryDate\" label=\"过期日期\" width=\"200\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<span :style=\"getExpiryStyle(scope.row.expiryDate)\">\r\n\t\t\t\t\t\t\t{{formatDate(scope.row.expiryDate)}}\r\n\t\t\t\t\t\t\t<span v-if=\"isExpiringSoon(scope.row.expiryDate)\"> ⚠️</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"status\" label=\"状态\" width=\"100\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-tag :type=\"getStatusType(scope.row.status)\">{{getStatusText(scope.row.status)}}</el-tag>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"操作\" width=\"300\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-button size=\"mini\" @click=\"toDetail(scope.row)\">详情</el-button>\r\n\t\t\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"edit(scope.row)\">编辑</el-button>\r\n\t\t\t\t\t\t<el-button size=\"mini\" type=\"warning\" @click=\"markAsUsed(scope.row)\" v-if=\"scope.row.status=='new'\">标记已使用</el-button>\r\n\t\t\t\t\t\t<el-button size=\"mini\" type=\"danger\" @click=\"del(scope.row.id)\">删除</el-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\t\t</div>\r\n\r\n\t\t<el-pagination\r\n\t\t\tbackground\r\n\t\t\tclass=\"pagination\"\r\n\t\t\t:pager-count=\"7\"\r\n\t\t\t:page-size=\"pageSize\"\r\n\t\t\t:page-sizes=\"[10, 20, 50, 100]\"\r\n\t\t\tprev-text=\"<\"\r\n\t\t\tnext-text=\">\"\r\n\t\t\t:hide-on-single-page=\"false\"\r\n\t\t\tlayout=\"total, prev, pager, next, sizes, jumper\"\r\n\t\t\t:total=\"total\"\r\n\t\t\t:style='{\"width\":\"1200px\",\"padding\":\"0\",\"margin\":\"20px auto\",\"whiteSpace\":\"nowrap\",\"color\":\"#333\",\"fontWeight\":\"500\"}'\r\n\t\t\t@current-change=\"curChange\"\r\n\t\t\t@size-change=\"sizeChange\"\r\n\t\t></el-pagination>\r\n\t</div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tbaseUrl: '',\r\n\t\t\tdataList: [],\r\n\t\t\tformSearch: {\r\n\t\t\t\tshicaiName: ''\r\n\t\t\t},\r\n\t\t\tstatusFilter: '',\r\n\t\t\tpageSize: 10,\r\n\t\t\ttotal: 0,\r\n\t\t\ttotalCount: 0,\r\n\t\t\texpiringSoonCount: 0,\r\n\t\t\tnewCount: 0\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\tthis.baseUrl = this.$config.baseUrl;\r\n\t\tthis.getStats();\r\n\t\tthis.getList(1);\r\n\t},\r\n\tmethods: {\r\n\t\t// 获取统计数据\r\n\t\tgetStats() {\r\n\t\t\tlet userid = this.$storage.get('userid');\r\n\t\t\tthis.$http.get(`usershicai/listByUser?userid=${userid}`).then(res => {\r\n\t\t\t\tif (res.data && res.data.code === 0) {\r\n\t\t\t\t\tlet list = res.data.data;\r\n\t\t\t\t\tthis.totalCount = list.length;\r\n\t\t\t\t\tthis.newCount = list.filter(item => item.status === 'new').length;\r\n\t\t\t\t\tthis.expiringSoonCount = list.filter(item => this.isExpiringSoon(item.expiryDate)).length;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 获取列表\r\n\t\tgetList(page) {\r\n\t\t\tlet userid = this.$storage.get('userid');\r\n\t\t\tlet params = {\r\n\t\t\t\tpage: page || 1,\r\n\t\t\t\tlimit: this.pageSize,\r\n\t\t\t\tuserid: userid\r\n\t\t\t};\r\n\t\t\tif (this.formSearch.shicaiName) {\r\n\t\t\t\tparams.shicaiName = this.formSearch.shicaiName;\r\n\t\t\t}\r\n\t\t\tif (this.statusFilter && this.statusFilter !== 'expiring') {\r\n\t\t\t\tparams.status = this.statusFilter;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (this.statusFilter === 'expiring') {\r\n\t\t\t\t// 查询即将过期的食材\r\n\t\t\t\tthis.$http.get(`usershicai/listExpiringSoon?userid=${userid}`).then(res => {\r\n\t\t\t\t\tif (res.data && res.data.code === 0) {\r\n\t\t\t\t\t\tthis.dataList = res.data.data;\r\n\t\t\t\t\t\tthis.total = this.dataList.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.$http.get('usershicai/page', {params}).then(res => {\r\n\t\t\t\t\tif (res.data && res.data.code === 0) {\r\n\t\t\t\t\t\tthis.dataList = res.data.data.list;\r\n\t\t\t\t\t\tthis.total = res.data.data.total;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 按状态筛选\r\n\t\tfilterByStatus(status) {\r\n\t\t\tthis.statusFilter = status;\r\n\t\t\tthis.getList(1);\r\n\t\t},\r\n\t\t// 格式化日期\r\n\t\tformatDate(date) {\r\n\t\t\tif (!date) return '';\r\n\t\t\tlet d = new Date(date);\r\n\t\t\treturn d.getFullYear() + '-' + \r\n\t\t\t\t   String(d.getMonth() + 1).padStart(2, '0') + '-' + \r\n\t\t\t\t   String(d.getDate()).padStart(2, '0');\r\n\t\t},\r\n\t\t// 判断是否即将过期\r\n\t\tisExpiringSoon(expiryDate) {\r\n\t\t\tif (!expiryDate) return false;\r\n\t\t\tlet now = new Date();\r\n\t\t\tlet expiry = new Date(expiryDate);\r\n\t\t\tlet diff = expiry - now;\r\n\t\t\tlet days = diff / (1000 * 60 * 60 * 24);\r\n\t\t\treturn days > 0 && days <= 7;\r\n\t\t},\r\n\t\t// 获取过期日期样式\r\n\t\tgetExpiryStyle(expiryDate) {\r\n\t\t\tif (this.isExpiringSoon(expiryDate)) {\r\n\t\t\t\treturn {'color': '#f56c6c', 'fontWeight': 'bold'};\r\n\t\t\t}\r\n\t\t\treturn {};\r\n\t\t},\r\n\t\t// 获取状态类型\r\n\t\tgetStatusType(status) {\r\n\t\t\tconst types = {\r\n\t\t\t\t'new': 'success',\r\n\t\t\t\t'used': 'info',\r\n\t\t\t\t'expired': 'danger',\r\n\t\t\t\t'discarded': 'warning'\r\n\t\t\t};\r\n\t\t\treturn types[status] || '';\r\n\t\t},\r\n\t\t// 获取状态文本\r\n\t\tgetStatusText(status) {\r\n\t\t\tconst texts = {\r\n\t\t\t\t'new': '新鲜',\r\n\t\t\t\t'used': '已使用',\r\n\t\t\t\t'expired': '已过期',\r\n\t\t\t\t'discarded': '已丢弃'\r\n\t\t\t};\r\n\t\t\treturn texts[status] || status;\r\n\t\t},\r\n\t\t// 标记为已使用\r\n\t\tmarkAsUsed(row) {\r\n\t\t\tthis.$confirm('确定标记为已使用吗?', '提示', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t}).then(() => {\r\n\t\t\t\tthis.$http.post('usershicai/update', {\r\n\t\t\t\t\tid: row.id,\r\n\t\t\t\t\tstatus: 'used'\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.data && res.data.code === 0) {\r\n\t\t\t\t\t\tthis.$message.success('操作成功');\r\n\t\t\t\t\t\tthis.getStats();\r\n\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 删除\r\n\t\tdel(id) {\r\n\t\t\tthis.$confirm('确定删除吗?', '提示', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t}).then(() => {\r\n\t\t\t\tthis.$http.post('usershicai/delete', [id]).then(res => {\r\n\t\t\t\t\tif (res.data && res.data.code === 0) {\r\n\t\t\t\t\t\tthis.$message.success('删除成功');\r\n\t\t\t\t\t\tthis.getStats();\r\n\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 添加\r\n\t\tadd() {\r\n\t\t\tthis.$router.push('/index/usershicaiAdd');\r\n\t\t},\r\n\t\t// 小票识别\r\n\t\treceiptScan() {\r\n\t\t\tthis.$router.push('/index/usershicaiReceipt');\r\n\t\t},\r\n\t\t// 编辑\r\n\t\tedit(row) {\r\n\t\t\tthis.$router.push({path: '/index/usershicaiAdd', query: {id: row.id}});\r\n\t\t},\r\n\t\t// 详情\r\n\t\ttoDetail(row) {\r\n\t\t\tthis.$router.push({path: '/index/usershicaiDetail', query: {id: row.id}});\r\n\t\t},\r\n\t\t// 分页\r\n\t\tcurChange(page) {\r\n\t\t\tthis.getList(page);\r\n\t\t},\r\n\t\tsizeChange(size) {\r\n\t\t\tthis.pageSize = size;\r\n\t\t\tthis.getList(1);\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.category-1 .item {\r\n\tpadding: 10px 20px;\r\n\tmargin: 0 10px;\r\n\tcursor: pointer;\r\n\tborder-radius: 6px;\r\n\ttransition: all 0.3s;\r\n}\r\n.category-1 .item:hover {\r\n\tbackground: #f0f0f0;\r\n}\r\n.category-1 .item.active {\r\n\tbackground: linear-gradient(90deg, rgba(255,233,100,1) 0%, rgba(194,248,126,1) 29%, rgba(181,233,252,1) 61%, rgba(246,172,218,1) 100%);\r\n\tcolor: #666;\r\n\tfont-weight: bold;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}