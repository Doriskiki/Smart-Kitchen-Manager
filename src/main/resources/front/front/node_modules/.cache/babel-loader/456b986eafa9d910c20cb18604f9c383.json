{"remainingRequest":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\thread-loader\\dist\\cjs.js!D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\src\\pages\\usershicai\\receipt.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\src\\pages\\usershicai\\receipt.vue","mtime":1766835051528},{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\babel.config.js","mtime":1766811488312},{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766827789760},{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1766827789760},{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1766827793571},{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766827789760},{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1766827794095}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5tYXAuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJhc2VVcmw6ICcnLAogICAgICB1cGxvYWRVcmw6ICcnLAogICAgICB1cGxvYWRpbmc6IGZhbHNlLAogICAgICBzYXZpbmc6IGZhbHNlLAogICAgICByZWNvZ25pemVkSXRlbXM6IFtdLAogICAgICBjb21tb25QdXJjaGFzZURhdGU6ICcnLAogICAgICBjb21tb25TdGF0dXM6ICduZXcnCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuYmFzZVVybCA9IHRoaXMuJGNvbmZpZy5iYXNlVXJsOwogICAgdGhpcy51cGxvYWRVcmwgPSB0aGlzLmJhc2VVcmwgKyAnL29jci9yZWNvZ25pemVSZWNlaXB0JzsKICAgIHRoaXMuY29tbW9uUHVyY2hhc2VEYXRlID0gdGhpcy5mb3JtYXREYXRlVGltZShuZXcgRGF0ZSgpKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOS4iuS8oOWJjeajgOafpQogICAgYmVmb3JlVXBsb2FkKGZpbGUpIHsKICAgICAgY29uc3QgaXNJbWFnZSA9IGZpbGUudHlwZS5pbmRleE9mKCdpbWFnZScpICE9PSAtMTsKICAgICAgY29uc3QgaXNMdDVNID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCA1OwogICAgICBpZiAoIWlzSW1hZ2UpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCflj6rog73kuIrkvKDlm77niYfmlofku7bvvIEnKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKCFpc0x0NU0pIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCflm77niYflpKflsI/kuI3og73otoXov4cgNU1C77yBJyk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHRoaXMudXBsb2FkaW5nID0gdHJ1ZTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogICAgLy8g5LiK5Lyg5oiQ5YqfCiAgICBoYW5kbGVVcGxvYWRTdWNjZXNzKHJlc3BvbnNlLCBmaWxlLCBmaWxlTGlzdCkgewogICAgICB0aGlzLnVwbG9hZGluZyA9IGZhbHNlOwogICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMCkgewogICAgICAgIGNvbnN0IGl0ZW1zID0gcmVzcG9uc2UuaXRlbXMgfHwgW107CiAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfmnKror4bliKvliLDpo5/mnZDkv6Hmga/vvIzor7fmo4Dmn6Xlm77niYfmmK/lkKbmuIXmmbAnKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8vIOi9rOaNouS4uumjn+adkOagvOW8jwogICAgICAgIHRoaXMucmVjb2duaXplZEl0ZW1zID0gaXRlbXMubWFwKGl0ZW0gPT4gKHsKICAgICAgICAgIHNoaWNhaU5hbWU6IGl0ZW0ubmFtZSB8fCAnJywKICAgICAgICAgIHF1YW50aXR5OiBpdGVtLnF1YW50aXR5IHx8IDEsCiAgICAgICAgICB1bml0OiBpdGVtLnVuaXQgfHwgJ+S4qicsCiAgICAgICAgICBwdXJjaGFzZURhdGU6IHRoaXMuY29tbW9uUHVyY2hhc2VEYXRlLAogICAgICAgICAgZXhwaXJ5RGF0ZTogdGhpcy5jYWxjdWxhdGVFeHBpcnlEYXRlKHRoaXMuY29tbW9uUHVyY2hhc2VEYXRlLCA3KSwKICAgICAgICAgIHN0YXR1czogJ25ldycKICAgICAgICB9KSk7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKGDor4bliKvmiJDlip/vvIHlhbHor4bliKvliLAgJHtpdGVtcy5sZW5ndGh9IOmhuemjn+adkGApOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcG9uc2UubXNnIHx8ICfor4bliKvlpLHotKUnKTsKICAgICAgfQogICAgfSwKICAgIC8vIOS4iuS8oOWksei0pQogICAgaGFuZGxlVXBsb2FkRXJyb3IoZXJyLCBmaWxlLCBmaWxlTGlzdCkgewogICAgICB0aGlzLnVwbG9hZGluZyA9IGZhbHNlOwogICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDlpLHotKXvvJonICsgZXJyLm1lc3NhZ2UpOwogICAgfSwKICAgIC8vIOW6lOeUqOe7n+S4gOiuvue9rgogICAgYXBwbHlDb21tb25TZXR0aW5ncygpIHsKICAgICAgdGhpcy5yZWNvZ25pemVkSXRlbXMuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICBpdGVtLnB1cmNoYXNlRGF0ZSA9IHRoaXMuY29tbW9uUHVyY2hhc2VEYXRlOwogICAgICAgIGl0ZW0uc3RhdHVzID0gdGhpcy5jb21tb25TdGF0dXM7CiAgICAgICAgaXRlbS5leHBpcnlEYXRlID0gdGhpcy5jYWxjdWxhdGVFeHBpcnlEYXRlKHRoaXMuY29tbW9uUHVyY2hhc2VEYXRlLCA3KTsKICAgICAgfSk7CiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5bey5bqU55So57uf5LiA6K6+572uJyk7CiAgICB9LAogICAgLy8g6K6h566X6L+H5pyf5pel5pyfCiAgICBjYWxjdWxhdGVFeHBpcnlEYXRlKHB1cmNoYXNlRGF0ZSwgZGF5cykgewogICAgICBpZiAoIXB1cmNoYXNlRGF0ZSkgcmV0dXJuICcnOwogICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKHB1cmNoYXNlRGF0ZSk7CiAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIGRheXMpOwogICAgICByZXR1cm4gdGhpcy5mb3JtYXREYXRlVGltZShkYXRlKTsKICAgIH0sCiAgICAvLyDliKDpmaTpobkKICAgIHJlbW92ZUl0ZW0oaW5kZXgpIHsKICAgICAgdGhpcy5yZWNvZ25pemVkSXRlbXMuc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgICAvLyDmuIXnqbrnu5PmnpwKICAgIGNsZWFyUmVzdWx0cygpIHsKICAgICAgdGhpcy4kY29uZmlybSgn56Gu5a6a5riF56m65omA5pyJ6K+G5Yir57uT5p6c5ZCX77yfJywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMucmVjb2duaXplZEl0ZW1zID0gW107CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOaJuemHj+a3u+WKoAogICAgYmF0Y2hBZGQoKSB7CiAgICAgIC8vIOmqjOivgeaVsOaNrgogICAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMucmVjb2duaXplZEl0ZW1zKSB7CiAgICAgICAgaWYgKCFpdGVtLnNoaWNhaU5hbWUpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+Whq+WGmeaJgOaciemjn+adkOWQjeensCcpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoIWl0ZW0ucHVyY2hhc2VEYXRlKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7fpgInmi6notK3kubDml6XmnJ8nKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5zYXZpbmcgPSB0cnVlOwogICAgICBsZXQgdXNlcmlkID0gdGhpcy4kc3RvcmFnZS5nZXQoJ3VzZXJpZCcpOwoKICAgICAgLy8g5Li65q+P5Liq6aOf5p2Q5re75YqgdXNlcmlkCiAgICAgIGxldCBpdGVtcyA9IHRoaXMucmVjb2duaXplZEl0ZW1zLm1hcChpdGVtID0+ICh7CiAgICAgICAgLi4uaXRlbSwKICAgICAgICB1c2VyaWQ6IHVzZXJpZAogICAgICB9KSk7CgogICAgICAvLyDmibnph4/kv53lrZgKICAgICAgdGhpcy4kaHR0cC5wb3N0KCd1c2Vyc2hpY2FpL2JhdGNoU2F2ZScsIGl0ZW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5zYXZpbmcgPSBmYWxzZTsKICAgICAgICBpZiAocmVzLmRhdGEgJiYgcmVzLmRhdGEuY29kZSA9PT0gMCkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmibnph4/mt7vliqDmiJDlip/vvIEnKTsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvaW5kZXgvdXNlcnNoaWNhaUxpc3QnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMuZGF0YS5tc2cgfHwgJ+a3u+WKoOWksei0pScpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMuc2F2aW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5re75Yqg5aSx6LSlJyk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOi/lOWbngogICAgYmFjaygpIHsKICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgIH0sCiAgICAvLyDmoLzlvI/ljJbml6XmnJ/ml7bpl7QKICAgIGZvcm1hdERhdGVUaW1lKGRhdGUpIHsKICAgICAgbGV0IGQgPSBuZXcgRGF0ZShkYXRlKTsKICAgICAgcmV0dXJuIGQuZ2V0RnVsbFllYXIoKSArICctJyArIFN0cmluZyhkLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpICsgJy0nICsgU3RyaW5nKGQuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpICsgJyAnICsgU3RyaW5nKGQuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwgJzAnKSArICc6JyArIFN0cmluZyhkLmdldE1pbnV0ZXMoKSkucGFkU3RhcnQoMiwgJzAnKSArICc6JyArIFN0cmluZyhkLmdldFNlY29uZHMoKSkucGFkU3RhcnQoMiwgJzAnKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["data","baseUrl","uploadUrl","uploading","saving","recognizedItems","commonPurchaseDate","commonStatus","created","$config","formatDateTime","Date","methods","beforeUpload","file","isImage","type","indexOf","isLt5M","size","$message","error","handleUploadSuccess","response","fileList","code","items","length","warning","map","item","shicaiName","name","quantity","unit","purchaseDate","expiryDate","calculateExpiryDate","status","success","msg","handleUploadError","err","message","applyCommonSettings","forEach","days","date","setDate","getDate","removeItem","index","splice","clearResults","$confirm","confirmButtonText","cancelButtonText","then","batchAdd","userid","$storage","get","$http","post","res","$router","push","catch","back","go","d","getFullYear","String","getMonth","padStart","getHours","getMinutes","getSeconds"],"sources":["src/pages/usershicai/receipt.vue"],"sourcesContent":["<template>\r\n<div>\r\n\t<div :style='{\"padding\":\"12px\",\"margin\":\"10px auto\",\"borderColor\":\"#dbd9f4\",\"borderRadius\":\"8px\",\"background\":\"#fff\",\"borderWidth\":\"0 0 2px\",\"width\":\"1200px\",\"borderStyle\":\"solid\"}' class=\"breadcrumb-preview\">\r\n\t\t<el-breadcrumb :separator=\"'Œû'\" :style='{\"width\":\"100%\",\"margin\":\"0 auto\",\"fontSize\":\"14px\",\"lineHeight\":\"1\",\"display\":\"flex\"}'>\r\n\t\t\t<el-breadcrumb-item>È¶ñÈ°µ</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>ÊàëÁöÑÈ£üÊùêÂ∫ì</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>Â∞èÁ•®ËØÜÂà´ÂΩïÂÖ•</el-breadcrumb-item>\r\n\t\t</el-breadcrumb>\r\n\t</div>\r\n\t\r\n\t<div class=\"receipt-preview\" :style='{\"width\":\"1200px\",\"margin\":\"10px auto\",\"position\":\"relative\",\"background\":\"none\"}'>\r\n\t\t\r\n\t\t<!-- ‰∏ä‰º†Âå∫Âüü -->\r\n\t\t<el-card :style='{\"marginBottom\":\"20px\"}'>\r\n\t\t\t<div slot=\"header\">\r\n\t\t\t\t<span :style='{\"fontSize\":\"18px\",\"fontWeight\":\"bold\"}'>üì∏ ‰∏ä‰º†Ë¥≠Áâ©Â∞èÁ•®</span>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<div class=\"upload-area\">\r\n\t\t\t\t<el-upload\r\n\t\t\t\t\tclass=\"upload-demo\"\r\n\t\t\t\t\tdrag\r\n\t\t\t\t\t:action=\"uploadUrl\"\r\n\t\t\t\t\t:on-success=\"handleUploadSuccess\"\r\n\t\t\t\t\t:on-error=\"handleUploadError\"\r\n\t\t\t\t\t:before-upload=\"beforeUpload\"\r\n\t\t\t\t\t:show-file-list=\"false\"\r\n\t\t\t\t\taccept=\"image/*\">\r\n\t\t\t\t\t<i class=\"el-icon-upload\"></i>\r\n\t\t\t\t\t<div class=\"el-upload__text\">Â∞ÜÂ∞èÁ•®ÂõæÁâáÊãñÂà∞Ê≠§Â§ÑÔºåÊàñ<em>ÁÇπÂáª‰∏ä‰º†</em></div>\r\n\t\t\t\t\t<div class=\"el-upload__tip\" slot=\"tip\">ÊîØÊåÅ JPG„ÄÅPNG Ê†ºÂºèÔºåÂª∫ËÆÆÂõæÁâáÊ∏ÖÊô∞„ÄÅÂÖâÁ∫øÂÖÖË∂≥</div>\r\n\t\t\t\t</el-upload>\r\n\t\t\t\t\r\n\t\t\t\t<div v-if=\"uploading\" :style='{\"textAlign\":\"center\",\"marginTop\":\"20px\"}'>\r\n\t\t\t\t\t<i class=\"el-icon-loading\" :style='{\"fontSize\":\"32px\",\"color\":\"#409EFF\"}\"></i>\r\n\t\t\t\t\t<div :style='{\"marginTop\":\"10px\",\"color\":\"#666\"}'>Ê≠£Âú®ËØÜÂà´‰∏≠ÔºåËØ∑Á®çÂÄô...</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</el-card>\r\n\t\t\r\n\t\t<!-- ËØÜÂà´ÁªìÊûú -->\r\n\t\t<el-card v-if=\"recognizedItems.length > 0\">\r\n\t\t\t<div slot=\"header\">\r\n\t\t\t\t<span :style='{\"fontSize\":\"18px\",\"fontWeight\":\"bold\"}'>‚úÖ ËØÜÂà´ÁªìÊûú</span>\r\n\t\t\t\t<el-button style=\"float: right; padding: 3px 0\" type=\"text\" @click=\"clearResults\">Ê∏ÖÁ©∫</el-button>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<div :style='{\"marginBottom\":\"20px\"}'>\r\n\t\t\t\t<el-alert\r\n\t\t\t\t\ttitle=\"ËØ∑Ê£ÄÊü•Âπ∂‰øÆÊîπËØÜÂà´ÁªìÊûúÔºåÁ°ÆËÆ§Êó†ËØØÂêéÁÇπÂáªÊâπÈáèÊ∑ªÂä†\"\r\n\t\t\t\t\ttype=\"info\"\r\n\t\t\t\t\t:closable=\"false\">\r\n\t\t\t\t</el-alert>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<!-- Áªü‰∏ÄËÆæÁΩÆ -->\r\n\t\t\t<el-form :inline=\"true\" :style='{\"marginBottom\":\"20px\",\"padding\":\"15px\",\"background\":\"#f5f7fa\",\"borderRadius\":\"4px\"}'>\r\n\t\t\t\t<el-form-item label=\"Ë¥≠‰π∞Êó•Êúü\">\r\n\t\t\t\t\t<el-date-picker\r\n\t\t\t\t\t\tv-model=\"commonPurchaseDate\"\r\n\t\t\t\t\t\ttype=\"datetime\"\r\n\t\t\t\t\t\tplaceholder=\"ÈÄâÊã©Ë¥≠‰π∞Êó•Êúü\"\r\n\t\t\t\t\t\tvalue-format=\"yyyy-MM-dd HH:mm:ss\"\r\n\t\t\t\t\t\t:style='{\"width\":\"200px\"}'>\r\n\t\t\t\t\t</el-date-picker>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"ÈªòËÆ§Áä∂ÊÄÅ\">\r\n\t\t\t\t\t<el-select v-model=\"commonStatus\" placeholder=\"ÈÄâÊã©Áä∂ÊÄÅ\" :style='{\"width\":\"120px\"}'>\r\n\t\t\t\t\t\t<el-option label=\"Êñ∞È≤ú\" value=\"new\"></el-option>\r\n\t\t\t\t\t\t<el-option label=\"Â∑≤‰ΩøÁî®\" value=\"used\"></el-option>\r\n\t\t\t\t\t</el-select>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-button type=\"primary\" size=\"small\" @click=\"applyCommonSettings\">Â∫îÁî®Âà∞ÂÖ®ÈÉ®</el-button>\r\n\t\t\t</el-form>\r\n\t\t\t\r\n\t\t\t<!-- È£üÊùêÂàóË°® -->\r\n\t\t\t<el-table :data=\"recognizedItems\" border :style='{\"width\":\"100%\"}'>\r\n\t\t\t\t<el-table-column type=\"index\" label=\"Â∫èÂè∑\" width=\"60\"></el-table-column>\r\n\t\t\t\t<el-table-column label=\"È£üÊùêÂêçÁß∞\" width=\"200\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-input v-model=\"scope.row.shicaiName\" size=\"small\"></el-input>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"Êï∞Èáè\" width=\"120\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-input-number v-model=\"scope.row.quantity\" :min=\"1\" size=\"small\" :style='{\"width\":\"100%\"}'></el-input-number>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"Âçï‰Ωç\" width=\"120\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-select v-model=\"scope.row.unit\" size=\"small\" :style='{\"width\":\"100%\"}'>\r\n\t\t\t\t\t\t\t<el-option label=\"ÂÖã\" value=\"ÂÖã\"></el-option>\r\n\t\t\t\t\t\t\t<el-option label=\"ÂçÉÂÖã\" value=\"ÂçÉÂÖã\"></el-option>\r\n\t\t\t\t\t\t\t<el-option label=\"Êñ§\" value=\"Êñ§\"></el-option>\r\n\t\t\t\t\t\t\t<el-option label=\"‰∏™\" value=\"‰∏™\"></el-option>\r\n\t\t\t\t\t\t\t<el-option label=\"Ë¢ã\" value=\"Ë¢ã\"></el-option>\r\n\t\t\t\t\t\t\t<el-option label=\"Áõí\" value=\"Áõí\"></el-option>\r\n\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"Ë¥≠‰π∞Êó•Êúü\" width=\"180\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-date-picker\r\n\t\t\t\t\t\t\tv-model=\"scope.row.purchaseDate\"\r\n\t\t\t\t\t\t\ttype=\"datetime\"\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvalue-format=\"yyyy-MM-dd HH:mm:ss\"\r\n\t\t\t\t\t\t\t:style='{\"width\":\"100%\"}'>\r\n\t\t\t\t\t\t</el-date-picker>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"ËøáÊúüÊó•Êúü\" width=\"180\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-date-picker\r\n\t\t\t\t\t\t\tv-model=\"scope.row.expiryDate\"\r\n\t\t\t\t\t\t\ttype=\"datetime\"\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvalue-format=\"yyyy-MM-dd HH:mm:ss\"\r\n\t\t\t\t\t\t\t:style='{\"width\":\"100%\"}'>\r\n\t\t\t\t\t\t</el-date-picker>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"Áä∂ÊÄÅ\" width=\"120\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-select v-model=\"scope.row.status\" size=\"small\" :style='{\"width\":\"100%\"}'>\r\n\t\t\t\t\t\t\t<el-option label=\"Êñ∞È≤ú\" value=\"new\"></el-option>\r\n\t\t\t\t\t\t\t<el-option label=\"Â∑≤‰ΩøÁî®\" value=\"used\"></el-option>\r\n\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"Êìç‰Ωú\" width=\"100\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-button type=\"danger\" size=\"mini\" @click=\"removeItem(scope.$index)\">Âà†Èô§</el-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\t\t\t\r\n\t\t\t<!-- Êìç‰ΩúÊåâÈíÆ -->\r\n\t\t\t<div :style='{\"marginTop\":\"20px\",\"textAlign\":\"center\"}'>\r\n\t\t\t\t<el-button type=\"primary\" size=\"large\" @click=\"batchAdd\" :loading=\"saving\">\r\n\t\t\t\t\t<i class=\"el-icon-check\"></i> ÊâπÈáèÊ∑ªÂä† ({{recognizedItems.length}}È°π)\r\n\t\t\t\t</el-button>\r\n\t\t\t\t<el-button size=\"large\" @click=\"back\">ËøîÂõû</el-button>\r\n\t\t\t</div>\r\n\t\t</el-card>\r\n\t\t\r\n\t\t<!-- ‰ΩøÁî®ËØ¥Êòé -->\r\n\t\t<el-card v-if=\"recognizedItems.length === 0\" :style='{\"marginTop\":\"20px\"}'>\r\n\t\t\t<div slot=\"header\">\r\n\t\t\t\t<span :style='{\"fontSize\":\"18px\",\"fontWeight\":\"bold\"}'>üí° ‰ΩøÁî®ËØ¥Êòé</span>\r\n\t\t\t</div>\r\n\t\t\t<div :style='{\"lineHeight\":\"2\"}'>\r\n\t\t\t\t<p><strong>1. ÊãçÊëÑÂ∞èÁ•®Ôºö</strong>Á°Æ‰øùÂ∞èÁ•®Âπ≥Êï¥„ÄÅÂÖâÁ∫øÂÖÖË∂≥„ÄÅÊñáÂ≠óÊ∏ÖÊô∞</p>\r\n\t\t\t\t<p><strong>2. ‰∏ä‰º†ÂõæÁâáÔºö</strong>ÊîØÊåÅÊãñÊãΩÊàñÁÇπÂáª‰∏ä‰º†ÔºåÁ≥ªÁªü‰ºöËá™Âä®ËØÜÂà´</p>\r\n\t\t\t\t<p><strong>3. Ê£ÄÊü•ÁªìÊûúÔºö</strong>ËØÜÂà´ÂêéËØ∑‰ªîÁªÜÊ†∏ÂØπÂïÜÂìÅÂêçÁß∞„ÄÅÊï∞ÈáèÁ≠â‰ø°ÊÅØ</p>\r\n\t\t\t\t<p><strong>4. ‰øÆÊîπ‰ø°ÊÅØÔºö</strong>ÂèØ‰ª•Áõ¥Êé•Âú®Ë°®Ê†º‰∏≠‰øÆÊîπËØÜÂà´ÈîôËØØÁöÑÂÜÖÂÆπ</p>\r\n\t\t\t\t<p><strong>5. ÊâπÈáèÊ∑ªÂä†Ôºö</strong>Á°ÆËÆ§Êó†ËØØÂêéÁÇπÂáª\"ÊâπÈáèÊ∑ªÂä†\"ÊåâÈíÆ</p>\r\n\t\t\t\t<p :style='{\"color\":\"#E6A23C\",\"marginTop\":\"10px\"}'>\r\n\t\t\t\t\t<i class=\"el-icon-warning\"></i> ÊèêÁ§∫ÔºöOCRËØÜÂà´ÂèØËÉΩÂ≠òÂú®ËØØÂ∑ÆÔºåËØ∑Âä°ÂøÖÊ£ÄÊü•ÂêéÂÜçÊ∑ªÂä†\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</el-card>\r\n\t</div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tbaseUrl: '',\r\n\t\t\tuploadUrl: '',\r\n\t\t\tuploading: false,\r\n\t\t\tsaving: false,\r\n\t\t\trecognizedItems: [],\r\n\t\t\tcommonPurchaseDate: '',\r\n\t\t\tcommonStatus: 'new'\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\tthis.baseUrl = this.$config.baseUrl;\r\n\t\tthis.uploadUrl = this.baseUrl + '/ocr/recognizeReceipt';\r\n\t\tthis.commonPurchaseDate = this.formatDateTime(new Date());\r\n\t},\r\n\tmethods: {\r\n\t\t// ‰∏ä‰º†ÂâçÊ£ÄÊü•\r\n\t\tbeforeUpload(file) {\r\n\t\t\tconst isImage = file.type.indexOf('image') !== -1;\r\n\t\t\tconst isLt5M = file.size / 1024 / 1024 < 5;\r\n\t\t\t\r\n\t\t\tif (!isImage) {\r\n\t\t\t\tthis.$message.error('Âè™ËÉΩ‰∏ä‰º†ÂõæÁâáÊñá‰ª∂ÔºÅ');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (!isLt5M) {\r\n\t\t\t\tthis.$message.error('ÂõæÁâáÂ§ßÂ∞è‰∏çËÉΩË∂ÖËøá 5MBÔºÅ');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.uploading = true;\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t\r\n\t\t// ‰∏ä‰º†ÊàêÂäü\r\n\t\thandleUploadSuccess(response, file, fileList) {\r\n\t\t\tthis.uploading = false;\r\n\t\t\t\r\n\t\t\tif (response.code === 0) {\r\n\t\t\t\tconst items = response.items || [];\r\n\t\t\t\t\r\n\t\t\t\tif (items.length === 0) {\r\n\t\t\t\t\tthis.$message.warning('Êú™ËØÜÂà´Âà∞È£üÊùê‰ø°ÊÅØÔºåËØ∑Ê£ÄÊü•ÂõæÁâáÊòØÂê¶Ê∏ÖÊô∞');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// ËΩ¨Êç¢‰∏∫È£üÊùêÊ†ºÂºè\r\n\t\t\t\tthis.recognizedItems = items.map(item => ({\r\n\t\t\t\t\tshicaiName: item.name || '',\r\n\t\t\t\t\tquantity: item.quantity || 1,\r\n\t\t\t\t\tunit: item.unit || '‰∏™',\r\n\t\t\t\t\tpurchaseDate: this.commonPurchaseDate,\r\n\t\t\t\t\texpiryDate: this.calculateExpiryDate(this.commonPurchaseDate, 7),\r\n\t\t\t\t\tstatus: 'new'\r\n\t\t\t\t}));\r\n\t\t\t\t\r\n\t\t\t\tthis.$message.success(`ËØÜÂà´ÊàêÂäüÔºÅÂÖ±ËØÜÂà´Âà∞ ${items.length} È°πÈ£üÊùê`);\r\n\t\t\t} else {\r\n\t\t\t\tthis.$message.error(response.msg || 'ËØÜÂà´Â§±Ë¥•');\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// ‰∏ä‰º†Â§±Ë¥•\r\n\t\thandleUploadError(err, file, fileList) {\r\n\t\t\tthis.uploading = false;\r\n\t\t\tthis.$message.error('‰∏ä‰º†Â§±Ë¥•Ôºö' + err.message);\r\n\t\t},\r\n\t\t\r\n\t\t// Â∫îÁî®Áªü‰∏ÄËÆæÁΩÆ\r\n\t\tapplyCommonSettings() {\r\n\t\t\tthis.recognizedItems.forEach(item => {\r\n\t\t\t\titem.purchaseDate = this.commonPurchaseDate;\r\n\t\t\t\titem.status = this.commonStatus;\r\n\t\t\t\titem.expiryDate = this.calculateExpiryDate(this.commonPurchaseDate, 7);\r\n\t\t\t});\r\n\t\t\tthis.$message.success('Â∑≤Â∫îÁî®Áªü‰∏ÄËÆæÁΩÆ');\r\n\t\t},\r\n\t\t\r\n\t\t// ËÆ°ÁÆóËøáÊúüÊó•Êúü\r\n\t\tcalculateExpiryDate(purchaseDate, days) {\r\n\t\t\tif (!purchaseDate) return '';\r\n\t\t\tlet date = new Date(purchaseDate);\r\n\t\t\tdate.setDate(date.getDate() + days);\r\n\t\t\treturn this.formatDateTime(date);\r\n\t\t},\r\n\t\t\r\n\t\t// Âà†Èô§È°π\r\n\t\tremoveItem(index) {\r\n\t\t\tthis.recognizedItems.splice(index, 1);\r\n\t\t},\r\n\t\t\r\n\t\t// Ê∏ÖÁ©∫ÁªìÊûú\r\n\t\tclearResults() {\r\n\t\t\tthis.$confirm('Á°ÆÂÆöÊ∏ÖÁ©∫ÊâÄÊúâËØÜÂà´ÁªìÊûúÂêóÔºü', 'ÊèêÁ§∫', {\r\n\t\t\t\tconfirmButtonText: 'Á°ÆÂÆö',\r\n\t\t\t\tcancelButtonText: 'ÂèñÊ∂à',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t}).then(() => {\r\n\t\t\t\tthis.recognizedItems = [];\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\t// ÊâπÈáèÊ∑ªÂä†\r\n\t\tbatchAdd() {\r\n\t\t\t// È™åËØÅÊï∞ÊçÆ\r\n\t\t\tfor (let item of this.recognizedItems) {\r\n\t\t\t\tif (!item.shicaiName) {\r\n\t\t\t\t\tthis.$message.error('ËØ∑Â°´ÂÜôÊâÄÊúâÈ£üÊùêÂêçÁß∞');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!item.purchaseDate) {\r\n\t\t\t\t\tthis.$message.error('ËØ∑ÈÄâÊã©Ë¥≠‰π∞Êó•Êúü');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.saving = true;\r\n\t\t\tlet userid = this.$storage.get('userid');\r\n\t\t\t\r\n\t\t\t// ‰∏∫ÊØè‰∏™È£üÊùêÊ∑ªÂä†userid\r\n\t\t\tlet items = this.recognizedItems.map(item => ({\r\n\t\t\t\t...item,\r\n\t\t\t\tuserid: userid\r\n\t\t\t}));\r\n\t\t\t\r\n\t\t\t// ÊâπÈáè‰øùÂ≠ò\r\n\t\t\tthis.$http.post('usershicai/batchSave', items).then(res => {\r\n\t\t\t\tthis.saving = false;\r\n\t\t\t\tif (res.data && res.data.code === 0) {\r\n\t\t\t\t\tthis.$message.success('ÊâπÈáèÊ∑ªÂä†ÊàêÂäüÔºÅ');\r\n\t\t\t\t\tthis.$router.push('/index/usershicaiList');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$message.error(res.data.msg || 'Ê∑ªÂä†Â§±Ë¥•');\r\n\t\t\t\t}\r\n\t\t\t}).catch(() => {\r\n\t\t\t\tthis.saving = false;\r\n\t\t\t\tthis.$message.error('Ê∑ªÂä†Â§±Ë¥•');\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\t// ËøîÂõû\r\n\t\tback() {\r\n\t\t\tthis.$router.go(-1);\r\n\t\t},\r\n\t\t\r\n\t\t// Ê†ºÂºèÂåñÊó•ÊúüÊó∂Èó¥\r\n\t\tformatDateTime(date) {\r\n\t\t\tlet d = new Date(date);\r\n\t\t\treturn d.getFullYear() + '-' + \r\n\t\t\t\t   String(d.getMonth() + 1).padStart(2, '0') + '-' + \r\n\t\t\t\t   String(d.getDate()).padStart(2, '0') + ' ' +\r\n\t\t\t\t   String(d.getHours()).padStart(2, '0') + ':' +\r\n\t\t\t\t   String(d.getMinutes()).padStart(2, '0') + ':' +\r\n\t\t\t\t   String(d.getSeconds()).padStart(2, '0');\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.upload-area {\r\n\tpadding: 20px;\r\n}\r\n.upload-demo {\r\n\ttext-align: center;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}