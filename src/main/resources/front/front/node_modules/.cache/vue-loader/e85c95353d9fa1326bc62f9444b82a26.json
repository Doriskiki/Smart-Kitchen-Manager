{"remainingRequest":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\src\\pages\\usershicai\\receipt.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\src\\pages\\usershicai\\receipt.vue","mtime":1766836770126},{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766827789760},{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1766827793571},{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766827789760},{"path":"D:\\Ê°åÈù¢\\Smart-Kitchen-Manager\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1766827794095}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGJhc2VVcmw6ICcnLA0KICAgICAgdXBsb2FkVXJsOiAnJywNCiAgICAgIGhlYWRlcnM6IHt9LA0KICAgICAgdXBsb2FkaW5nOiBmYWxzZSwNCiAgICAgIHNhdmluZzogZmFsc2UsDQogICAgICByZWNvZ25pemVkSXRlbXM6IFtdLA0KICAgICAgY29tbW9uUHVyY2hhc2VEYXRlOiAnJywNCiAgICAgIGNvbW1vblN0YXR1czogJ25ldycNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5iYXNlVXJsID0gdGhpcy4kY29uZmlnLmJhc2VVcmw7DQogICAgdGhpcy51cGxvYWRVcmwgPSB0aGlzLmJhc2VVcmwgKyAnL29jci9yZWNvZ25pemVSZWNlaXB0JzsNCiAgICB0aGlzLmNvbW1vblB1cmNoYXNlRGF0ZSA9IHRoaXMuZm9ybWF0RGF0ZVRpbWUobmV3IERhdGUoKSk7DQogICAgDQogICAgLy8g6K6+572u6K+35rGC5aS077yM5pC65bimIHRva2VuDQogICAgbGV0IHRva2VuID0gdGhpcy4kc3RvcmFnZS5nZXQoJ1Rva2VuJyk7DQogICAgaWYgKHRva2VuKSB7DQogICAgICB0aGlzLmhlYWRlcnMgPSB7DQogICAgICAgICdUb2tlbic6IHRva2VuDQogICAgICB9Ow0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGJlZm9yZVVwbG9hZChmaWxlKSB7DQogICAgICBjb25zdCBpc0ltYWdlID0gZmlsZS50eXBlLmluZGV4T2YoJ2ltYWdlJykgIT09IC0xOw0KICAgICAgY29uc3QgaXNMdDVNID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCA1Ow0KICAgICAgDQogICAgICBpZiAoIWlzSW1hZ2UpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5Y+q6IO95LiK5Lyg5Zu+54mH5paH5Lu277yBJyk7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgIH0NCiAgICAgIGlmICghaXNMdDVNKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WbvueJh+Wkp+Wwj+S4jeiDvei2hei/hyA1TULvvIEnKTsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfQ0KICAgICAgDQogICAgICB0aGlzLnVwbG9hZGluZyA9IHRydWU7DQogICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9LA0KICAgIA0KICAgIGhhbmRsZVVwbG9hZFN1Y2Nlc3MocmVzcG9uc2UsIGZpbGUsIGZpbGVMaXN0KSB7DQogICAgICB0aGlzLnVwbG9hZGluZyA9IGZhbHNlOw0KICAgICAgDQogICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMCkgew0KICAgICAgICBjb25zdCBpdGVtcyA9IHJlc3BvbnNlLml0ZW1zIHx8IFtdOw0KICAgICAgICANCiAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn5pyq6K+G5Yir5Yiw6aOf5p2Q5L+h5oGv77yM6K+35qOA5p+l5Zu+54mH5piv5ZCm5riF5pmwJyk7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICB0aGlzLnJlY29nbml6ZWRJdGVtcyA9IGl0ZW1zLm1hcChpdGVtID0+ICh7DQogICAgICAgICAgc2hpY2FpTmFtZTogaXRlbS5uYW1lIHx8ICcnLA0KICAgICAgICAgIHF1YW50aXR5OiBpdGVtLnF1YW50aXR5IHx8IDEsDQogICAgICAgICAgdW5pdDogaXRlbS51bml0IHx8ICfkuKonLA0KICAgICAgICAgIHB1cmNoYXNlRGF0ZTogdGhpcy5jb21tb25QdXJjaGFzZURhdGUsDQogICAgICAgICAgZXhwaXJ5RGF0ZTogdGhpcy5jYWxjdWxhdGVFeHBpcnlEYXRlKHRoaXMuY29tbW9uUHVyY2hhc2VEYXRlLCA3KSwNCiAgICAgICAgICBzdGF0dXM6ICduZXcnDQogICAgICAgIH0pKTsNCiAgICAgICAgDQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcyhg6K+G5Yir5oiQ5Yqf77yB5YWx6K+G5Yir5YiwICR7aXRlbXMubGVuZ3RofSDpobnpo5/mnZBgKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcG9uc2UubXNnIHx8ICfor4bliKvlpLHotKUnKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIA0KICAgIGhhbmRsZVVwbG9hZEVycm9yKGVyciwgZmlsZSwgZmlsZUxpc3QpIHsNCiAgICAgIHRoaXMudXBsb2FkaW5nID0gZmFsc2U7DQogICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDlpLHotKXvvJonICsgZXJyLm1lc3NhZ2UpOw0KICAgIH0sDQogICAgDQogICAgYXBwbHlDb21tb25TZXR0aW5ncygpIHsNCiAgICAgIHRoaXMucmVjb2duaXplZEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgIGl0ZW0ucHVyY2hhc2VEYXRlID0gdGhpcy5jb21tb25QdXJjaGFzZURhdGU7DQogICAgICAgIGl0ZW0uc3RhdHVzID0gdGhpcy5jb21tb25TdGF0dXM7DQogICAgICAgIGl0ZW0uZXhwaXJ5RGF0ZSA9IHRoaXMuY2FsY3VsYXRlRXhwaXJ5RGF0ZSh0aGlzLmNvbW1vblB1cmNoYXNlRGF0ZSwgNyk7DQogICAgICB9KTsNCiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5bey5bqU55So57uf5LiA6K6+572uJyk7DQogICAgfSwNCiAgICANCiAgICBjYWxjdWxhdGVFeHBpcnlEYXRlKHB1cmNoYXNlRGF0ZSwgZGF5cykgew0KICAgICAgaWYgKCFwdXJjaGFzZURhdGUpIHJldHVybiAnJzsNCiAgICAgIGxldCBkYXRlID0gbmV3IERhdGUocHVyY2hhc2VEYXRlKTsNCiAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIGRheXMpOw0KICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0RGF0ZVRpbWUoZGF0ZSk7DQogICAgfSwNCiAgICANCiAgICByZW1vdmVJdGVtKGluZGV4KSB7DQogICAgICB0aGlzLnJlY29nbml6ZWRJdGVtcy5zcGxpY2UoaW5kZXgsIDEpOw0KICAgIH0sDQogICAgDQogICAgY2xlYXJSZXN1bHRzKCkgew0KICAgICAgdGhpcy4kY29uZmlybSgn56Gu5a6a5riF56m65omA5pyJ6K+G5Yir57uT5p6c5ZCX77yfJywgJ+aPkOekuicsIHsNCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLA0KICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnDQogICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgdGhpcy5yZWNvZ25pemVkSXRlbXMgPSBbXTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgDQogICAgYmF0Y2hBZGQoKSB7DQogICAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMucmVjb2duaXplZEl0ZW1zKSB7DQogICAgICAgIGlmICghaXRlbS5zaGljYWlOYW1lKSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6K+35aGr5YaZ5omA5pyJ6aOf5p2Q5ZCN56ewJyk7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGlmICghaXRlbS5wdXJjaGFzZURhdGUpIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7fpgInmi6notK3kubDml6XmnJ8nKTsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIA0KICAgICAgdGhpcy5zYXZpbmcgPSB0cnVlOw0KICAgICAgbGV0IHVzZXJpZCA9IHRoaXMuJHN0b3JhZ2UuZ2V0KCd1c2VyaWQnKTsNCiAgICAgIA0KICAgICAgbGV0IGl0ZW1zID0gdGhpcy5yZWNvZ25pemVkSXRlbXMubWFwKGl0ZW0gPT4gKHsNCiAgICAgICAgLi4uaXRlbSwNCiAgICAgICAgdXNlcmlkOiB1c2VyaWQNCiAgICAgIH0pKTsNCiAgICAgIA0KICAgICAgdGhpcy4kaHR0cC5wb3N0KCd1c2Vyc2hpY2FpL2JhdGNoU2F2ZScsIGl0ZW1zKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMuc2F2aW5nID0gZmFsc2U7DQogICAgICAgIGlmIChyZXMuZGF0YSAmJiByZXMuZGF0YS5jb2RlID09PSAwKSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmibnph4/mt7vliqDmiJDlip/vvIEnKTsNCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2luZGV4L3VzZXJzaGljYWlMaXN0Jyk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMuZGF0YS5tc2cgfHwgJ+a3u+WKoOWksei0pScpOw0KICAgICAgICB9DQogICAgICB9KS5jYXRjaCgoKSA9PiB7DQogICAgICAgIHRoaXMuc2F2aW5nID0gZmFsc2U7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+a3u+WKoOWksei0pScpOw0KICAgICAgfSk7DQogICAgfSwNCiAgICANCiAgICBiYWNrKCkgew0KICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsNCiAgICB9LA0KICAgIA0KICAgIGZvcm1hdERhdGVUaW1lKGRhdGUpIHsNCiAgICAgIGxldCBkID0gbmV3IERhdGUoZGF0ZSk7DQogICAgICByZXR1cm4gZC5nZXRGdWxsWWVhcigpICsgJy0nICsgDQogICAgICAgICAgICAgU3RyaW5nKGQuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJykgKyAnLScgKyANCiAgICAgICAgICAgICBTdHJpbmcoZC5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJykgKyAnICcgKw0KICAgICAgICAgICAgIFN0cmluZyhkLmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsICcwJykgKyAnOicgKw0KICAgICAgICAgICAgIFN0cmluZyhkLmdldE1pbnV0ZXMoKSkucGFkU3RhcnQoMiwgJzAnKSArICc6JyArDQogICAgICAgICAgICAgU3RyaW5nKGQuZ2V0U2Vjb25kcygpKS5wYWRTdGFydCgyLCAnMCcpOw0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["receipt.vue"],"names":[],"mappings":";AA6IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"receipt.vue","sourceRoot":"src/pages/usershicai","sourcesContent":["<template>\r\n  <div>\r\n    <div :style='{\"padding\":\"12px\",\"margin\":\"10px auto\",\"borderColor\":\"#dbd9f4\",\"borderRadius\":\"8px\",\"background\":\"#fff\",\"borderWidth\":\"0 0 2px\",\"width\":\"1200px\",\"borderStyle\":\"solid\"}' class=\"breadcrumb-preview\">\r\n      <el-breadcrumb :separator=\"'Œû'\" :style='{\"width\":\"100%\",\"margin\":\"0 auto\",\"fontSize\":\"14px\",\"lineHeight\":\"1\",\"display\":\"flex\"}'>\r\n        <el-breadcrumb-item>È¶ñÈ°µ</el-breadcrumb-item>\r\n        <el-breadcrumb-item>ÊàëÁöÑÈ£üÊùêÂ∫ì</el-breadcrumb-item>\r\n        <el-breadcrumb-item>Â∞èÁ•®ËØÜÂà´ÂΩïÂÖ•</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n    </div>\r\n    \r\n    <div class=\"receipt-preview\" :style='{\"width\":\"1200px\",\"margin\":\"10px auto\",\"position\":\"relative\",\"background\":\"none\"}'>\r\n      \r\n      <el-card :style='{\"marginBottom\":\"20px\"}'>\r\n        <div slot=\"header\">\r\n          <span :style='{\"fontSize\":\"18px\",\"fontWeight\":\"bold\"}'>üì∏ ‰∏ä‰º†Ë¥≠Áâ©Â∞èÁ•®</span>\r\n        </div>\r\n        \r\n        <div class=\"upload-area\">\r\n          <el-upload\r\n            class=\"upload-demo\"\r\n            drag\r\n            :action=\"uploadUrl\"\r\n            :headers=\"headers\"\r\n            :on-success=\"handleUploadSuccess\"\r\n            :on-error=\"handleUploadError\"\r\n            :before-upload=\"beforeUpload\"\r\n            :show-file-list=\"false\"\r\n            accept=\"image/*\">\r\n            <i class=\"el-icon-upload\" style=\"font-size: 67px; color: #C0C4CC;\"></i>\r\n            <div class=\"el-upload__text\">Â∞ÜÂ∞èÁ•®ÂõæÁâáÊãñÂà∞Ê≠§Â§ÑÔºåÊàñ<em>ÁÇπÂáª‰∏ä‰º†</em></div>\r\n            <div class=\"el-upload__tip\" slot=\"tip\" style=\"font-size: 12px; color: #606266; margin-top: 7px;\">ÊîØÊåÅ JPG„ÄÅPNG Ê†ºÂºèÔºåÂª∫ËÆÆÂõæÁâáÊ∏ÖÊô∞„ÄÅÂÖâÁ∫øÂÖÖË∂≥</div>\r\n          </el-upload>\r\n          \r\n          <div v-if=\"uploading\" :style='{\"textAlign\":\"center\",\"marginTop\":\"20px\"}'>\r\n            <i class=\"el-icon-loading\" :style='{\"fontSize\":\"32px\",\"color\":\"#409EFF\"}'></i>\r\n            <div :style='{\"marginTop\":\"10px\",\"color\":\"#666\"}'>Ê≠£Âú®ËØÜÂà´‰∏≠ÔºåËØ∑Á®çÂÄô...</div>\r\n          </div>\r\n        </div>\r\n      </el-card>\r\n      \r\n      <el-card v-if=\"recognizedItems.length > 0\">\r\n        <div slot=\"header\">\r\n          <span :style='{\"fontSize\":\"18px\",\"fontWeight\":\"bold\"}'>‚úÖ ËØÜÂà´ÁªìÊûú</span>\r\n          <el-button style=\"float: right; padding: 3px 0\" type=\"text\" @click=\"clearResults\">Ê∏ÖÁ©∫</el-button>\r\n        </div>\r\n        \r\n        <div :style='{\"marginBottom\":\"20px\"}'>\r\n          <el-alert title=\"ËØ∑Ê£ÄÊü•Âπ∂‰øÆÊîπËØÜÂà´ÁªìÊûúÔºåÁ°ÆËÆ§Êó†ËØØÂêéÁÇπÂáªÊâπÈáèÊ∑ªÂä†\" type=\"info\" :closable=\"false\"></el-alert>\r\n        </div>\r\n        \r\n        <el-form :inline=\"true\" :style='{\"marginBottom\":\"20px\",\"padding\":\"15px\",\"background\":\"#f5f7fa\",\"borderRadius\":\"4px\"}'>\r\n          <el-form-item label=\"Ë¥≠‰π∞Êó•Êúü\">\r\n            <el-date-picker v-model=\"commonPurchaseDate\" type=\"datetime\" placeholder=\"ÈÄâÊã©Ë¥≠‰π∞Êó•Êúü\" value-format=\"yyyy-MM-dd HH:mm:ss\" :style='{\"width\":\"200px\"}'></el-date-picker>\r\n          </el-form-item>\r\n          <el-form-item label=\"ÈªòËÆ§Áä∂ÊÄÅ\">\r\n            <el-select v-model=\"commonStatus\" placeholder=\"ÈÄâÊã©Áä∂ÊÄÅ\" :style='{\"width\":\"120px\"}'>\r\n              <el-option label=\"Êñ∞È≤ú\" value=\"new\"></el-option>\r\n              <el-option label=\"Â∑≤‰ΩøÁî®\" value=\"used\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-button type=\"primary\" size=\"small\" @click=\"applyCommonSettings\">Â∫îÁî®Âà∞ÂÖ®ÈÉ®</el-button>\r\n        </el-form>\r\n        \r\n        <el-table :data=\"recognizedItems\" border :style='{\"width\":\"100%\"}'>\r\n          <el-table-column type=\"index\" label=\"Â∫èÂè∑\" width=\"60\"></el-table-column>\r\n          <el-table-column label=\"È£üÊùêÂêçÁß∞\" width=\"200\">\r\n            <template slot-scope=\"scope\">\r\n              <el-input v-model=\"scope.row.shicaiName\" size=\"small\"></el-input>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"Êï∞Èáè\" width=\"120\">\r\n            <template slot-scope=\"scope\">\r\n              <el-input-number v-model=\"scope.row.quantity\" :min=\"1\" size=\"small\" :style='{\"width\":\"100%\"}'></el-input-number>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"Âçï‰Ωç\" width=\"120\">\r\n            <template slot-scope=\"scope\">\r\n              <el-select v-model=\"scope.row.unit\" size=\"small\" :style='{\"width\":\"100%\"}'>\r\n                <el-option label=\"ÂÖã\" value=\"ÂÖã\"></el-option>\r\n                <el-option label=\"ÂçÉÂÖã\" value=\"ÂçÉÂÖã\"></el-option>\r\n                <el-option label=\"Êñ§\" value=\"Êñ§\"></el-option>\r\n                <el-option label=\"‰∏™\" value=\"‰∏™\"></el-option>\r\n                <el-option label=\"Ë¢ã\" value=\"Ë¢ã\"></el-option>\r\n                <el-option label=\"Áõí\" value=\"Áõí\"></el-option>\r\n              </el-select>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"Ë¥≠‰π∞Êó•Êúü\" width=\"180\">\r\n            <template slot-scope=\"scope\">\r\n              <el-date-picker v-model=\"scope.row.purchaseDate\" type=\"datetime\" size=\"small\" value-format=\"yyyy-MM-dd HH:mm:ss\" :style='{\"width\":\"100%\"}'></el-date-picker>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"ËøáÊúüÊó•Êúü\" width=\"180\">\r\n            <template slot-scope=\"scope\">\r\n              <el-date-picker v-model=\"scope.row.expiryDate\" type=\"datetime\" size=\"small\" value-format=\"yyyy-MM-dd HH:mm:ss\" :style='{\"width\":\"100%\"}'></el-date-picker>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"Áä∂ÊÄÅ\" width=\"120\">\r\n            <template slot-scope=\"scope\">\r\n              <el-select v-model=\"scope.row.status\" size=\"small\" :style='{\"width\":\"100%\"}'>\r\n                <el-option label=\"Êñ∞È≤ú\" value=\"new\"></el-option>\r\n                <el-option label=\"Â∑≤‰ΩøÁî®\" value=\"used\"></el-option>\r\n              </el-select>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"Êìç‰Ωú\" width=\"100\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button type=\"danger\" size=\"mini\" @click=\"removeItem(scope.$index)\">Âà†Èô§</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        \r\n        <div :style='{\"marginTop\":\"20px\",\"textAlign\":\"center\"}'>\r\n          <el-button type=\"primary\" size=\"large\" @click=\"batchAdd\" :loading=\"saving\">\r\n            <i class=\"el-icon-check\"></i> ÊâπÈáèÊ∑ªÂä† ({{recognizedItems.length}}È°π)\r\n          </el-button>\r\n          <el-button size=\"large\" @click=\"back\">ËøîÂõû</el-button>\r\n        </div>\r\n      </el-card>\r\n      \r\n      <el-card v-if=\"recognizedItems.length === 0\" :style='{\"marginTop\":\"20px\"}'>\r\n        <div slot=\"header\">\r\n          <span :style='{\"fontSize\":\"18px\",\"fontWeight\":\"bold\"}'>üí° ‰ΩøÁî®ËØ¥Êòé</span>\r\n        </div>\r\n        <div :style='{\"lineHeight\":\"2\"}'>\r\n          <p><strong>1. ÊãçÊëÑÂ∞èÁ•®Ôºö</strong>Á°Æ‰øùÂ∞èÁ•®Âπ≥Êï¥„ÄÅÂÖâÁ∫øÂÖÖË∂≥„ÄÅÊñáÂ≠óÊ∏ÖÊô∞</p>\r\n          <p><strong>2. ‰∏ä‰º†ÂõæÁâáÔºö</strong>ÊîØÊåÅÊãñÊãΩÊàñÁÇπÂáª‰∏ä‰º†ÔºåÁ≥ªÁªü‰ºöËá™Âä®ËØÜÂà´</p>\r\n          <p><strong>3. Ê£ÄÊü•ÁªìÊûúÔºö</strong>ËØÜÂà´ÂêéËØ∑‰ªîÁªÜÊ†∏ÂØπÂïÜÂìÅÂêçÁß∞„ÄÅÊï∞ÈáèÁ≠â‰ø°ÊÅØ</p>\r\n          <p><strong>4. ‰øÆÊîπ‰ø°ÊÅØÔºö</strong>ÂèØ‰ª•Áõ¥Êé•Âú®Ë°®Ê†º‰∏≠‰øÆÊîπËØÜÂà´ÈîôËØØÁöÑÂÜÖÂÆπ</p>\r\n          <p><strong>5. ÊâπÈáèÊ∑ªÂä†Ôºö</strong>Á°ÆËÆ§Êó†ËØØÂêéÁÇπÂáª\"ÊâπÈáèÊ∑ªÂä†\"ÊåâÈíÆ</p>\r\n          <p :style='{\"color\":\"#E6A23C\",\"marginTop\":\"10px\"}'>\r\n            <i class=\"el-icon-warning\"></i> ÊèêÁ§∫ÔºöOCRËØÜÂà´ÂèØËÉΩÂ≠òÂú®ËØØÂ∑ÆÔºåËØ∑Âä°ÂøÖÊ£ÄÊü•ÂêéÂÜçÊ∑ªÂä†\r\n          </p>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      baseUrl: '',\r\n      uploadUrl: '',\r\n      headers: {},\r\n      uploading: false,\r\n      saving: false,\r\n      recognizedItems: [],\r\n      commonPurchaseDate: '',\r\n      commonStatus: 'new'\r\n    }\r\n  },\r\n  created() {\r\n    this.baseUrl = this.$config.baseUrl;\r\n    this.uploadUrl = this.baseUrl + '/ocr/recognizeReceipt';\r\n    this.commonPurchaseDate = this.formatDateTime(new Date());\r\n    \r\n    // ËÆæÁΩÆËØ∑Ê±ÇÂ§¥ÔºåÊê∫Â∏¶ token\r\n    let token = this.$storage.get('Token');\r\n    if (token) {\r\n      this.headers = {\r\n        'Token': token\r\n      };\r\n    }\r\n  },\r\n  methods: {\r\n    beforeUpload(file) {\r\n      const isImage = file.type.indexOf('image') !== -1;\r\n      const isLt5M = file.size / 1024 / 1024 < 5;\r\n      \r\n      if (!isImage) {\r\n        this.$message.error('Âè™ËÉΩ‰∏ä‰º†ÂõæÁâáÊñá‰ª∂ÔºÅ');\r\n        return false;\r\n      }\r\n      if (!isLt5M) {\r\n        this.$message.error('ÂõæÁâáÂ§ßÂ∞è‰∏çËÉΩË∂ÖËøá 5MBÔºÅ');\r\n        return false;\r\n      }\r\n      \r\n      this.uploading = true;\r\n      return true;\r\n    },\r\n    \r\n    handleUploadSuccess(response, file, fileList) {\r\n      this.uploading = false;\r\n      \r\n      if (response.code === 0) {\r\n        const items = response.items || [];\r\n        \r\n        if (items.length === 0) {\r\n          this.$message.warning('Êú™ËØÜÂà´Âà∞È£üÊùê‰ø°ÊÅØÔºåËØ∑Ê£ÄÊü•ÂõæÁâáÊòØÂê¶Ê∏ÖÊô∞');\r\n          return;\r\n        }\r\n        \r\n        this.recognizedItems = items.map(item => ({\r\n          shicaiName: item.name || '',\r\n          quantity: item.quantity || 1,\r\n          unit: item.unit || '‰∏™',\r\n          purchaseDate: this.commonPurchaseDate,\r\n          expiryDate: this.calculateExpiryDate(this.commonPurchaseDate, 7),\r\n          status: 'new'\r\n        }));\r\n        \r\n        this.$message.success(`ËØÜÂà´ÊàêÂäüÔºÅÂÖ±ËØÜÂà´Âà∞ ${items.length} È°πÈ£üÊùê`);\r\n      } else {\r\n        this.$message.error(response.msg || 'ËØÜÂà´Â§±Ë¥•');\r\n      }\r\n    },\r\n    \r\n    handleUploadError(err, file, fileList) {\r\n      this.uploading = false;\r\n      this.$message.error('‰∏ä‰º†Â§±Ë¥•Ôºö' + err.message);\r\n    },\r\n    \r\n    applyCommonSettings() {\r\n      this.recognizedItems.forEach(item => {\r\n        item.purchaseDate = this.commonPurchaseDate;\r\n        item.status = this.commonStatus;\r\n        item.expiryDate = this.calculateExpiryDate(this.commonPurchaseDate, 7);\r\n      });\r\n      this.$message.success('Â∑≤Â∫îÁî®Áªü‰∏ÄËÆæÁΩÆ');\r\n    },\r\n    \r\n    calculateExpiryDate(purchaseDate, days) {\r\n      if (!purchaseDate) return '';\r\n      let date = new Date(purchaseDate);\r\n      date.setDate(date.getDate() + days);\r\n      return this.formatDateTime(date);\r\n    },\r\n    \r\n    removeItem(index) {\r\n      this.recognizedItems.splice(index, 1);\r\n    },\r\n    \r\n    clearResults() {\r\n      this.$confirm('Á°ÆÂÆöÊ∏ÖÁ©∫ÊâÄÊúâËØÜÂà´ÁªìÊûúÂêóÔºü', 'ÊèêÁ§∫', {\r\n        confirmButtonText: 'Á°ÆÂÆö',\r\n        cancelButtonText: 'ÂèñÊ∂à',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.recognizedItems = [];\r\n      });\r\n    },\r\n    \r\n    batchAdd() {\r\n      for (let item of this.recognizedItems) {\r\n        if (!item.shicaiName) {\r\n          this.$message.error('ËØ∑Â°´ÂÜôÊâÄÊúâÈ£üÊùêÂêçÁß∞');\r\n          return;\r\n        }\r\n        if (!item.purchaseDate) {\r\n          this.$message.error('ËØ∑ÈÄâÊã©Ë¥≠‰π∞Êó•Êúü');\r\n          return;\r\n        }\r\n      }\r\n      \r\n      this.saving = true;\r\n      let userid = this.$storage.get('userid');\r\n      \r\n      let items = this.recognizedItems.map(item => ({\r\n        ...item,\r\n        userid: userid\r\n      }));\r\n      \r\n      this.$http.post('usershicai/batchSave', items).then(res => {\r\n        this.saving = false;\r\n        if (res.data && res.data.code === 0) {\r\n          this.$message.success('ÊâπÈáèÊ∑ªÂä†ÊàêÂäüÔºÅ');\r\n          this.$router.push('/index/usershicaiList');\r\n        } else {\r\n          this.$message.error(res.data.msg || 'Ê∑ªÂä†Â§±Ë¥•');\r\n        }\r\n      }).catch(() => {\r\n        this.saving = false;\r\n        this.$message.error('Ê∑ªÂä†Â§±Ë¥•');\r\n      });\r\n    },\r\n    \r\n    back() {\r\n      this.$router.go(-1);\r\n    },\r\n    \r\n    formatDateTime(date) {\r\n      let d = new Date(date);\r\n      return d.getFullYear() + '-' + \r\n             String(d.getMonth() + 1).padStart(2, '0') + '-' + \r\n             String(d.getDate()).padStart(2, '0') + ' ' +\r\n             String(d.getHours()).padStart(2, '0') + ':' +\r\n             String(d.getMinutes()).padStart(2, '0') + ':' +\r\n             String(d.getSeconds()).padStart(2, '0');\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.upload-area {\r\n  padding: 20px;\r\n}\r\n.upload-demo {\r\n  text-align: center;\r\n}\r\n.upload-demo >>> .el-upload {\r\n  width: 100%;\r\n}\r\n.upload-demo >>> .el-upload-dragger {\r\n  width: 100%;\r\n  height: 200px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.el-upload__text {\r\n  font-size: 14px;\r\n  color: #606266;\r\n  margin-top: 10px;\r\n}\r\n.el-upload__text em {\r\n  color: #409EFF;\r\n  font-style: normal;\r\n}\r\n</style>\r\n"]}]}